<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡¶ó‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏ ‡¶∏‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø ‡¶ì ‡¶ì‡¶ü‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK (Compat version for HTML) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-border: rgba(255, 255, 255, 0.2);
            --text-color: #ffffff;
            --text-muted: #d1d5db;
            --accent-color: #fbbf24;
            --bg-color: #1e1e2f;
            --nav-bg: rgba(30, 30, 47, 0.95);
            --success: #10b981;
            --danger: #ef4444;
            --radius: 16px;
        }

        /* Light Mode Improved */
        body.light-mode {
            --bg-color: #f0f2f5;
            --text-color: #1f2937;
            --text-muted: #4b5563;
            --card-bg: #ffffff;
            --card-border: #e5e7eb;
            --nav-bg: #ffffff;
            --primary-gradient: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
        }
        
        body.light-mode .glass-panel {
            background: #ffffff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e1e4e8;
            color: #333;
        }

        body.light-mode input, body.light-mode select {
            background: #f9fafb;
            border: 1px solid #d1d5db;
            color: #111;
        }
        body.light-mode .btn-secondary { background: #e5e7eb; border: 1px solid #ccc; color: #333; }
        body.light-mode .nav-item.active { color: #e52e71; }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', 'Noto Sans Bengali', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-color);
            background-image: var(--primary-gradient);
            background-attachment: fixed;
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 90px;
            transition: background 0.3s ease;
        }

        /* Utility & Reusable Classes */
        .hidden { display: none !important; }
        .flex { display: flex; }
        .justify-between { justify-content: space-between; }
        .items-center { align-items: center; }
        .w-full { width: 100%; }
        .text-center { text-align: center; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-4 { margin-bottom: 1rem; }
        
        /* Glassmorphism Cards */
        .glass-panel {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            transition: all 0.3s ease;
        }

        /* Inputs & Buttons */
        input, select {
            width: 100%; padding: 12px; margin-bottom: 10px;
            border-radius: 10px; border: 1px solid var(--card-border);
            background: rgba(255, 255, 255, 0.9); color: #333;
            font-size: 1rem; outline: none;
        }
        
        button {
            width: 100%; padding: 12px; border-radius: 10px; border: none;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            color: white; font-weight: 600; font-size: 1rem; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.96); }
        .btn-secondary { background: rgba(255,255,255,0.2); border: 1px solid white; }
        .btn-danger { background: var(--danger); color: white !important; }

        /* Page Animation */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .page { animation: fadeIn 0.4s ease-out; display: none; padding: 15px; }
        .page.active { display: block; }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--nav-bg); backdrop-filter: blur(10px);
            display: flex; justify-content: space-around; padding: 12px 0;
            border-top: 1px solid var(--card-border); z-index: 1000;
        }
        .nav-item { background: none; border: none; color: var(--text-muted); font-size: 0.8rem; box-shadow: none; }
        .nav-item i { font-size: 1.3rem; display: block; margin-bottom: 4px; }
        .nav-item.active { color: var(--accent-color); }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-card { text-align: center; padding: 15px; border-radius: 12px; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .bg-purple { background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); }
        .bg-blue { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); }
        .bg-orange { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); }
        .bg-pink { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); }
        .big-text { font-size: 1.4rem; font-weight: bold; margin-top: 5px; }
        
        /* Table */
        .data-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .data-table th, .data-table td { padding: 10px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 0.9rem; }
        
        /* Ad Containers */
        .ad-container { margin: 15px auto; text-align: center; overflow: hidden; display: flex; justify-content: center; align-items: center; border-radius: 8px; background: rgba(0,0,0,0.02); }

        /* Auth & Modal */
        #auth-screen, .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2000; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; padding: 20px;
        }
        #auth-screen { background: var(--primary-gradient); overflow-y: auto; }
        .modal { background: rgba(0,0,0,0.85); z-index: 3000; display: none; }
        .modal.active { display: flex; }
        .app-logo { width: 80px; height: 80px; background: white; border-radius: 50%; padding: 5px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

    <!-- Auth Screen -->
    <div id="auth-screen">
        <img src="https://i.postimg.cc/kGZ8J76f/logo.png" class="app-logo" alt="Logo">
        <h2 style="color:white; margin-bottom: 20px; text-align:center;">‡¶ó‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏ ‡¶∏‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</h2>
        
        <!-- Login Form -->
        <div id="login-form" class="glass-panel w-full" style="max-width: 350px;">
            <h3 class="mb-4 text-center">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <input type="tel" id="login-phone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (11 digit)">
            <input type="password" id="login-pin" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°" maxlength="6">
            <button onclick="handleLogin()">‡¶≤‡¶ó‡¶á‡¶®</button>
            <p class="mt-4 text-center text-sm" style="color:white">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á? <a href="#" onclick="toggleAuth('signup')" style="color:var(--accent-color); font-weight:bold;">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</a></p>
        </div>

        <!-- Signup Form -->
        <div id="signup-form" class="glass-panel w-full hidden" style="max-width: 350px;">
            <h3 class="mb-4 text-center">‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</h3>
            <input type="text" id="reg-name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
            <input type="tel" id="reg-phone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
            <select id="reg-designation" onchange="checkOtherDesignation()">
                <option value="">‡¶™‡¶¶‡¶¨‡ßÄ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                <option value="Operator">Operator</option><option value="Helper">Helper</option><option value="Iron Man">Iron Man</option><option value="Quality">Quality</option><option value="PM">PM</option><option value="GM">GM</option><option value="Line Chief">Line Chief</option><option value="Supervisor">Supervisor</option><option value="Time keeper">Time keeper</option><option value="Other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø (Other)</option>
            </select>
            <input type="text" id="reg-other-designation" placeholder="‡¶™‡¶¶‡¶¨‡ßÄ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" class="hidden">
            <div class="flex" style="gap: 5px;"><input type="text" id="reg-grade" placeholder="‡¶ó‡ßç‡¶∞‡ßá‡¶°"><input type="number" id="reg-basic" placeholder="‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶®"></div>
            <input type="number" id="reg-gross" placeholder="‡¶Æ‡ßã‡¶ü ‡¶¨‡ßá‡¶§‡¶® (Gross)">
            <input type="password" id="reg-pin" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶® (‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)" maxlength="6">
            <button onclick="handleSignup()">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™</button>
            <p class="mt-4 text-center text-sm" style="color:white">‡¶Ü‡¶ó‡ßá‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? <a href="#" onclick="toggleAuth('login')" style="color:var(--accent-color); font-weight:bold;">‡¶≤‡¶ó‡¶á‡¶®</a></p>
        </div>
    </div>

    <!-- Bonus Setup Modal -->
    <div id="bonus-setup-modal" class="modal">
        <div class="glass-panel w-full" style="max-width: 350px; background: var(--bg-color);">
            <h3 class="text-center mb-4">‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™</h3>
            <p class="text-sm text-muted mb-4 text-center">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶∞‡¶ø‡¶§‡ßá ‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ?</p>
            <input type="number" id="setup-bonus-amount" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: 725 ‡¶¨‡¶æ 500">
            <button onclick="saveBonusSetting()">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <!-- Main App Content -->
    <div id="app-content" class="hidden">
        <!-- HOME PAGE -->
        <div id="home" class="page active">
            <div class="flex justify-between items-center mb-4">
                <div><h2 id="home-greeting">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</h2><p class="text-sm" id="current-date-display" style="opacity:0.8"></p></div>
                <img src="https://i.postimg.cc/kGZ8J76f/logo.png" style="width: 40px; border-radius:50%">
            </div>
            <div class="summary-grid">
                <div class="stat-card bg-purple"><p>‡¶Æ‡ßã‡¶ü ‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ</p><div class="big-text"><span id="total-ot-hours">0</span> ‡¶ò</div></div>
                <div class="stat-card bg-blue"><p>‡¶Ü‡¶®‡ßÅ‡¶Æ‡¶æ‡¶®‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶®</p><div class="big-text"><span id="est-salary">0</span> ‡ß≥</div></div>
                <div class="stat-card bg-orange"><p>‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏</p><div class="big-text"><span id="display-bonus">0</span> ‡ß≥</div></div>
                <div class="stat-card bg-pink"><p>‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ</p><div class="big-text"><span id="other-bills">0</span> ‡ß≥</div></div>
            </div>
            <div class="glass-panel mt-4">
                <div class="flex justify-between items-center mb-2"><h3><i class="fas fa-calendar-alt" style="color: var(--accent-color)"></i> ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶õ‡ßÅ‡¶ü‡¶ø</h3><span class="text-sm" style="background:var(--accent-color); padding:2px 8px; border-radius:10px; color:#000;">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Æ‡¶æ‡¶∏</span></div>
                <div id="holiday-list" style="min-height: 50px;"></div>
            </div>
            <div class="ad-container" style="width: 300px; height: 250px;"><script type="text/javascript">atOptions={'key':'f05e53994372c08a40f69021b94c737b','format':'iframe','height':250,'width':300,'params':{}};</script><script type="text/javascript" src="//www.highperformanceformat.com/f05e53994372c08a40f69021b94c737b/invoke.js"></script></div>
        </div>
        <!-- OVERTIME PAGE -->
        <div id="overtime" class="page">
            <h2 class="mb-4">‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <div class="ad-container" style="width: 468px; height: 60px; max-width: 100%;"><script type="text/javascript">atOptions={'key':'cbfb25dda043c3217cef8dea9f896df2','format':'iframe','height':60,'width':468,'params':{}};</script><script type="text/javascript" src="//www.highperformanceformat.com/cbfb25dda043c3217cef8dea9f896df2/invoke.js"></script></div>
            <div class="glass-panel mt-4"><label>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label><input type="date" id="ot-date"><label>‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ß‡¶∞‡¶£</label><select id="ot-type" onchange="toggleOtHoursInput()"><option value="General">General Day</option><option value="Night">Night</option><option value="Friday">Friday/Holiday</option><option value="Absent">Absent</option></select><div id="ot-hours-container"><label>‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ (‡¶ò‡¶®‡ßç‡¶ü‡¶æ)</label><input type="number" id="ot-hours" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡ß® ‡¶Ö‡¶•‡¶¨‡¶æ ‡ß™"></div><button onclick="addOvertime()" class="mt-2"><i class="fas fa-plus-circle"></i> ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button></div>
            <div class="glass-panel mt-4"><h3><i class="fas fa-utensils"></i> ‡¶ü‡¶ø‡¶´‡¶ø‡¶® / ‡¶®‡¶æ‡¶á‡¶ü ‡¶¨‡¶ø‡¶≤</h3><select id="bill-type"><option value="Tiffin">‡¶ü‡¶ø‡¶´‡¶ø‡¶® ‡¶¨‡¶ø‡¶≤</option><option value="NightBill">‡¶®‡¶æ‡¶á‡¶ü ‡¶¨‡¶ø‡¶≤</option><option value="Other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option></select><input type="number" id="bill-amount" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£"><button onclick="addBill()" class="btn-secondary mt-2">‡¶¨‡¶ø‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button></div>
        </div>
        <!-- CALCULATOR PAGE -->
        <div id="calculator" class="page">
            <h2 class="mb-4">‡¶¨‡ßá‡¶§‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞</h2>
            <div class="glass-panel"><div class="flex justify-between mb-2"><span>‡¶Æ‡ßã‡¶ü ‡¶¨‡ßá‡¶§‡¶®:</span><span id="calc-gross">0</span></div><div class="flex justify-between mb-2"><span>‡¶¨‡ßá‡¶∏‡¶ø‡¶ï:</span><span id="calc-basic">0</span></div><div class="flex justify-between mb-4"><span>‡¶Æ‡ßã‡¶ü OT ‡¶ò‡¶®‡ßç‡¶ü‡¶æ:</span><span id="calc-total-ot">0</span></div><hr style="border:0; border-top:1px solid rgba(255,255,255,0.3); margin: 10px 0;"><div class="flex items-center mb-4"><input type="checkbox" id="check-att-bonus" style="width: 20px; height: 20px; margin: 0 10px 0 0;" checked><label for="check-att-bonus">‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ (<span id="calc-bonus-amt">0</span> ‡¶ü‡¶æ‡¶ï‡¶æ) ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá?</label></div><button onclick="calculateSalaryDetails()">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡ßÅ‡¶®</button></div>
            <div id="calc-result" class="glass-panel hidden mt-4" style="background: rgba(16, 185, 129, 0.1);"><h3 class="text-center mb-2" style="color: var(--success)">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</h3><table class="w-full text-sm"><tr><td>‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶∏‡ßá‡¶≤‡¶æ‡¶∞‡¶ø:</td><td class="text-right" id="res-basic">0</td></tr><tr><td>‡¶¨‡¶æ‡ßú‡¶ø ‡¶≠‡¶æ‡ßú‡¶æ:</td><td class="text-right" id="res-house">0</td></tr><tr><td>‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶≠‡¶æ‡¶§‡¶æ:</td><td class="text-right" id="res-med">0</td></tr><tr><td>OT ‡¶∞‡ßá‡¶ü:</td><td class="text-right" id="res-ot-rate">0</td></tr><tr><td>‡¶Æ‡ßã‡¶ü OT ‡¶ü‡¶æ‡¶ï‡¶æ:</td><td class="text-right" id="res-ot-total">0</td></tr><tr><td>‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏:</td><td class="text-right" id="res-bonus">0</td></tr><tr><td>‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶¨‡¶ø‡¶≤:</td><td class="text-right" id="res-bills">0</td></tr><tr style="font-weight: bold; border-top: 1px solid white;"><td class="pt-2">‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü ‡¶¨‡ßá‡¶§‡¶®:</td><td class="pt-2 text-right" id="res-grand-total">0</td></tr></table></div>
            <div class="ad-container" style="width: 320px; height: 50px;"><script type="text/javascript">atOptions={'key':'c9a0024b83c53997d0f0f8b4f10653c9','format':'iframe','height':50,'width':320,'params':{}};</script><script type="text/javascript" src="//www.highperformanceformat.com/c9a0024b83c53997d0f0f8b4f10653c9/invoke.js"></script></div>
        </div>
        <!-- LIST PAGE -->
        <div id="list" class="page">
            <h2 class="mb-4">‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
            <div class="ad-container" style="width: 728px; height: 90px; max-width: 100%;"><script type="text/javascript">atOptions={'key':'82181d21b05884891d9488e2b7fb793b','format':'iframe','height':90,'width':728,'params':{}};</script><script type="text/javascript" src="//www.highperformanceformat.com/82181d21b05884891d9488e2b7fb793b/invoke.js"></script></div>
            <div class="glass-panel" style="padding: 0;"><table class="data-table"><thead><tr><th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th><th>‡¶ß‡¶∞‡¶£</th><th>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th><th>‡¶è‡¶ï‡¶∂‡¶®</th></tr></thead><tbody id="work-history-body"></tbody></table><div id="empty-msg" class="p-4 text-center text-muted hidden">‡¶ï‡ßã‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</div></div>
        </div>
        <!-- PROFILE PAGE -->
        <div id="profile" class="page">
            <div class="glass-panel text-center"><div class="app-logo" style="margin: 0 auto 10px; display:flex; justify-content:center; align-items:center; font-size: 2rem; color: #333; font-weight:bold;"><span id="avatar-initial">U</span></div><h3 id="profile-name">User Name</h3><p id="profile-desig" class="text-sm" style="color: var(--accent-color)">Designation</p><p id="profile-phone" class="text-sm text-muted">01xxxxxxxxx</p><div class="mt-2 text-sm">‡¶ó‡ßç‡¶∞‡ßá‡¶°: <span id="profile-grade">N/A</span> | ‡¶¨‡ßá‡¶§‡¶®: <span id="profile-gross">0</span></div></div>
            <div class="glass-panel mt-4">
                <button onclick="openModal('edit-profile-modal')" class="btn-secondary mb-2"><i class="fas fa-user-edit"></i> ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</button>
                <button onclick="openModal('change-password-modal')" class="btn-secondary mb-2"><i class="fas fa-key"></i> ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</button>
                <button onclick="toggleDarkMode()" class="btn-secondary mb-2"><i class="fas fa-moon"></i> ‡¶≤‡¶æ‡¶á‡¶ü/‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°</button>
                <button onclick="openModal('privacy-modal')" class="btn-secondary mb-2"><i class="fas fa-shield-alt"></i> ‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø</button>
                <button onclick="logout()" class="btn-danger"><i class="fas fa-sign-out-alt"></i> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
            </div>
            <p class="text-center text-sm text-muted mt-4">Version 2.1.0</p>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav hidden" id="main-nav">
        <button class="nav-item active" onclick="navTo('home')"><i class="fas fa-home"></i> ‡¶π‡ßã‡¶Æ</button>
        <button class="nav-item" onclick="navTo('overtime')"><i class="fas fa-clock"></i> ‡¶ì‡¶ü‡¶ø</button>
        <button class="nav-item" onclick="navTo('calculator')"><i class="fas fa-calculator"></i> ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</button>
        <button class="nav-item" onclick="navTo('list')"><i class="fas fa-list"></i> ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</button>
        <button class="nav-item" onclick="navTo('profile')"><i class="fas fa-user"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</button>
    </nav>

    <!-- MODALS -->
    <!-- EDIT PROFILE MODAL -->
    <div id="edit-profile-modal" class="modal"><div class="glass-panel w-full" style="max-width: 400px; background: var(--bg-color);"><h3>‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</h3><p class="text-sm text-muted mb-4">‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶≤‡ßá ‡ß≠ ‡¶¶‡¶ø‡¶® ‡¶≤‡¶ï ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§</p><input type="text" id="edit-name" placeholder="‡¶®‡¶æ‡¶Æ"><input type="text" id="edit-desig" placeholder="‡¶™‡¶¶‡¶¨‡ßÄ"><input type="text" id="edit-grade" placeholder="‡¶ó‡ßç‡¶∞‡ßá‡¶°"><input type="number" id="edit-gross" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßã‡¶ü ‡¶¨‡ßá‡¶§‡¶®"><button onclick="saveProfileEdit()">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button><button onclick="closeModal('edit-profile-modal')" class="btn-secondary mt-2">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button></div></div>
    
    <!-- CHANGE PASSWORD MODAL -->
    <div id="change-password-modal" class="modal"><div class="glass-panel w-full" style="max-width: 400px; background: var(--bg-color);"><h3>‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h3><input type="password" id="current-pass" placeholder="‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°"><input type="password" id="new-pass" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° (‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)"><input type="password" id="confirm-new-pass" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®"><button onclick="handleChangePassword()">‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button><button onclick="closeModal('change-password-modal')" class="btn-secondary mt-2">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button></div></div>

    <!-- PRIVACY MODAL (UPDATED) -->
    <div id="privacy-modal" class="modal"><div class="glass-panel w-full" style="max-width: 500px; background: var(--bg-color);"><h3>‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø</h3><div style="height:300px; overflow-y:auto; font-size:0.9rem; margin: 10px 0; text-align: left; padding: 0 10px;"><p><strong>‡¶≠‡ßÇ‡¶Æ‡¶ø‡¶ï‡¶æ:</strong> ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ‡¶ï‡ßá ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶æ‡¶® ‡¶ï‡¶∞‡¶ø‡•§ ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ‡ßü ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶§‡¶ø ‡¶ú‡¶æ‡¶®‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶®‡•§</p><p class="mt-2"><strong>‡ßß. ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π:</strong></p><ul><li><strong>‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø:</strong> ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ, ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞, ‡¶™‡¶¶‡¶¨‡ßÄ, ‡¶ó‡ßç‡¶∞‡ßá‡¶° ‡¶è‡¶¨‡¶Ç ‡¶¨‡ßá‡¶§‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶ø‡•§</li><li><strong>‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø:</strong> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ñ‡¶® ‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡¶æ ‡¶¨‡¶ø‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶õ‡ßá‡¶®, ‡¶∏‡ßá‡¶á ‡¶§‡¶•‡ßç‡¶Ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Ö‡¶ß‡ßÄ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡ßá‡•§</li></ul><p class="mt-2"><strong>‡ß®. ‡¶§‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:</strong></p><ul><li>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶® ‡¶ì ‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡ßÅ‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§</li><li>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶æ‡¶∞‡¶ø‡¶§‡¶æ ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡Æö‡Æø‡Æ±‡Æ®‡Øç‡Æ§ ‡¶™‡¶∞‡¶ø‡¶∑‡ßá‡¶¨‡¶æ ‡¶¶‡¶ø‡¶§‡ßá‡•§</li></ul><p class="mt-2"><strong>‡ß©. ‡¶§‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ:</strong></p><ul><li>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø Firebase Authentication ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶è‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡ßá‡¶° ‡¶•‡¶æ‡¶ï‡ßá‡•§</li><li>‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶∞‡ßÅ‡¶≤‡¶∏ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ, ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶¨‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</li></ul><p class="mt-2"><strong>‡ß™. ‡¶•‡¶æ‡¶∞‡ßç‡¶°-‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏:</strong></p><ul><li>‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Adsterra-‡¶è‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶•‡¶æ‡¶∞‡ßç‡¶°-‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶ø ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§ ‡¶§‡¶æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶§‡¶•‡ßç‡¶Ø (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏) ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡ßá‡¶∞ ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§</li></ul><p class="mt-2"><strong>‡ß´. ‡¶®‡ßÄ‡¶§‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®:</strong></p><p>‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶è‡¶á ‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∞‡¶æ‡¶ñ‡¶ø‡•§</p></div><button onclick="closeModal('privacy-modal')">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button></div></div>

    <!-- Social Bar Script (Loads once at the end for reliability) -->
    <script type="text/javascript" src="//pl21010220.effectivegatecpm.com/36/f2/6e/36f26ed6744e876235db846fba07df11.js"></script>

    <script>
        // --- CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "SENDER_ID",
            appId: "APP_ID"
        };
        let db, auth;
        try { firebase.initializeApp(firebaseConfig); db = firebase.database(); auth = firebase.auth(); console.log("Firebase Connected"); } catch (e) { console.error("Firebase Config Missing", e); }

        let currentUser = null, currentData = { ot: [], bills: [] };
        const allHolidays = ["2025-01-26", "2025-02-21", "2025-03-17", "2025-03-26", "2025-04-14", "2025-05-01", "2025-05-12", "2025-06-07", "2025-07-17", "2025-08-15", "2025-09-05", "2025-10-02", "2025-12-16", "2025-12-25"];

        // --- AUTHENTICATION ---
        if(auth) { auth.onAuthStateChanged(user => { if (user) { loadUserData(user.uid); } else { document.getElementById('auth-screen').classList.remove('hidden'); document.getElementById('app-content').classList.add('hidden'); document.getElementById('main-nav').classList.add('hidden'); } }); }
        function toggleAuth(mode) { document.getElementById('login-form').classList.toggle('hidden', mode === 'signup'); document.getElementById('signup-form').classList.toggle('hidden', mode === 'login'); }
        function checkOtherDesignation() { document.getElementById('reg-other-designation').classList.toggle('hidden', document.getElementById('reg-designation').value !== 'Other'); }

        function handleSignup() {
            const name = document.getElementById('reg-name').value, phone = document.getElementById('reg-phone').value, desigVal = document.getElementById('reg-designation').value, desig = desigVal === 'Other' ? document.getElementById('reg-other-designation').value : desigVal, basic = parseFloat(document.getElementById('reg-basic').value), gross = parseFloat(document.getElementById('reg-gross').value), grade = document.getElementById('reg-grade').value, pin = document.getElementById('reg-pin').value;
            if (!name || phone.length !== 11 || !desig || !basic || !gross || pin.length < 6) { alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡¶ø‡¶®‡•§ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡ßß‡ßß ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§"); return; }
            const email = phone + "@gmcalculator.com";
            auth.createUserWithEmailAndPassword(email, pin).then(cred => {
                const userData = { uid: cred.user.uid, phone, name, designation: desig, grade, basic, gross, attendanceBonus: 0, joined: new Date().toISOString() };
                db.ref('users/' + cred.user.uid).set(userData).then(() => { currentUser = userData; document.getElementById('auth-screen').classList.add('hidden'); document.getElementById('bonus-setup-modal').classList.add('active'); });
            }).catch(error => alert("‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: " + error.message));
        }

        function handleLogin() {
            const phone = document.getElementById('login-phone').value, pin = document.getElementById('login-pin').value, email = phone + "@gmcalculator.com";
            if(phone.length !== 11 || pin.length < 6) { alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®‡•§"); return; }
            auth.signInWithEmailAndPassword(email, pin).catch(error => alert("‡¶≤‡¶ó‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§"));
        }
        function logout() { auth.signOut().then(() => location.reload()); }

        // --- PASSWORD CHANGE ---
        function handleChangePassword() {
            const currentPass = document.getElementById('current-pass').value;
            const newPass = document.getElementById('new-pass').value;
            const confirmPass = document.getElementById('confirm-new-pass').value;
            if (newPass.length < 6) { alert("‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§"); return; }
            if (newPass !== confirmPass) { alert("‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶Æ‡¶ø‡¶≤‡¶õ‡ßá ‡¶®‡¶æ‡•§"); return; }
            const user = auth.currentUser;
            const cred = firebase.auth.EmailAuthProvider.credential(user.email, currentPass);
            user.reauthenticateWithCredential(cred).then(() => {
                return user.updatePassword(newPass);
            }).then(() => {
                alert("‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
                closeModal('change-password-modal');
            }).catch(error => {
                alert("‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: " + error.message);
            });
        }

        // --- BONUS SETUP ---
        function saveBonusSetting() {
            const bonus = parseFloat(document.getElementById('setup-bonus-amount').value);
            if(isNaN(bonus) || bonus < 0) { alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¶‡¶ø‡¶®"); return; }
            if(currentUser && db) { db.ref('users/' + currentUser.uid).update({ attendanceBonus: bonus }); currentUser.attendanceBonus = bonus; closeModal('bonus-setup-modal'); showApp(); }
        }

        // --- MAIN APP LOGIC ---
        function loadUserData(uid) { db.ref('users/' + uid).once('value').then(snap => { currentUser = snap.val(); if(!currentUser) return; if(!currentUser.attendanceBonus) { document.getElementById('auth-screen').classList.add('hidden'); document.getElementById('bonus-setup-modal').classList.add('active'); } else { showApp(); } }); }
        function showApp() { document.getElementById('auth-screen').classList.add('hidden'); document.getElementById('bonus-setup-modal').classList.remove('active'); document.getElementById('app-content').classList.remove('hidden'); document.getElementById('main-nav').classList.remove('hidden'); document.getElementById('current-date-display').innerText = new Date().toLocaleDateString('bn-BD', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }); fillProfileUI(); loadHistoryData(); renderCurrentMonthHolidays(); navTo('home'); }
        function fillProfileUI() { ['home-greeting', 'profile-name'].forEach(id => document.getElementById(id).innerText = id === 'home-greeting' ? `‡¶π‡¶æ‡¶á, ${currentUser.name}` : currentUser.name); ['desig', 'phone', 'grade', 'gross'].forEach(id => document.getElementById(`profile-${id}`).innerText = currentUser[id]); document.getElementById('avatar-initial').innerText = currentUser.name.charAt(0).toUpperCase(); ['calc-gross', 'calc-basic', 'calc-bonus-amt', 'display-bonus'].forEach(id => document.getElementById(id).innerText = { 'calc-gross': currentUser.gross, 'calc-basic': currentUser.basic, 'calc-bonus-amt': currentUser.attendanceBonus, 'display-bonus': currentUser.attendanceBonus }[id]); ['edit-name', 'edit-desig', 'edit-grade', 'edit-gross'].forEach(id => document.getElementById(id).value = currentUser[id.split('-')[1]]); }
        function loadHistoryData() { db.ref('data/' + currentUser.uid).on('value', snap => { const val = snap.val(); currentData = val ? val : { ot: [], bills: [] }; if(!currentData.ot) currentData.ot = []; if(!currentData.bills) currentData.bills = []; updateUI(); }); }
        
        function updateUI() {
            const totalOT = (currentData.ot || []).reduce((sum, item) => sum + (item.hours || 0), 0);
            const totalBills = (currentData.bills || []).reduce((sum, item) => sum + (item.amount || 0), 0);
            document.getElementById('total-ot-hours').innerText = totalOT;
            document.getElementById('other-bills').innerText = totalBills;
            const otAmount = Math.round(totalOT * ((currentUser.basic / 208) * 2));
            document.getElementById('est-salary').innerText = Math.round(currentUser.gross + otAmount + currentUser.attendanceBonus + totalBills);
            document.getElementById('calc-total-ot').innerText = totalOT;
            const tbody = document.getElementById('work-history-body');
            const allEntries = [...(currentData.ot||[]), ...(currentData.bills||[])].sort((a,b) => b.id - a.id);
            tbody.innerHTML = allEntries.map(item => `<tr><td>${item.date}</td><td>${{'General':'‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶≤','Night':'‡¶®‡¶æ‡¶á‡¶ü','Friday':'‡¶õ‡ßÅ‡¶ü‡¶ø'}[item.type]||item.type}</td><td>${item.category==='OT'?item.hours+' ‡¶ò':item.amount+' ‡ß≥'}</td><td><button onclick="deleteEntry(${item.id},'${item.category}')" class="btn-danger" style="padding:4px 8px;"><i class="fas fa-trash"></i></button></td></tr>`).join('');
            document.getElementById('empty-msg').classList.toggle('hidden', allEntries.length > 0);
        }

        function renderCurrentMonthHolidays() {
            const list = document.getElementById('holiday-list'), currentMonth = new Date().getMonth();
            const monthHolidays = allHolidays.filter(h => new Date(h).getMonth() === currentMonth);
            list.innerHTML = monthHolidays.length ? monthHolidays.map(h => `<div style="padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); display:flex; justify-content:space-between;"><span>${new Date(h).toLocaleDateString('bn-BD',{day:'numeric',month:'long'})}</span><span style="color:var(--accent-color)">‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶õ‡ßÅ‡¶ü‡¶ø</span></div>`).join('') : '<p class="text-sm text-center p-2 text-muted">‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶õ‡ßÅ‡¶ü‡¶ø ‡¶®‡ßá‡¶á‡•§</p>';
        }

        // --- ACTIONS ---
        function addOvertime() { const date = document.getElementById('ot-date').value, type = document.getElementById('ot-type').value; let hours = parseFloat(document.getElementById('ot-hours').value); if (!date) { alert("‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶¶‡¶ø‡¶®"); return; } if (type !== 'Absent' && (isNaN(hours) || hours < 0)) { alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"); return; } hours = type === 'Absent' ? 0 : hours; currentData.ot.push({ id: Date.now(), date, type, hours, category: 'OT' }); syncData(); alert("‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); }
        function addBill() { const type = document.getElementById('bill-type').value, amount = parseFloat(document.getElementById('bill-amount').value); if (isNaN(amount) || amount <= 0) { alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¶‡¶ø‡¶®"); return; } currentData.bills.push({ id: Date.now(), date: new Date().toISOString().split('T')[0], type, amount, category: 'Bill' }); syncData(); alert("‡¶¨‡¶ø‡¶≤ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); }
        function deleteEntry(id, category) { if(confirm("‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) { if(category === 'OT') currentData.ot = currentData.ot.filter(x => x.id !== id); else currentData.bills = currentData.bills.filter(x => x.id !== id); syncData(); } }
        function syncData() { if(currentUser && db) { db.ref('data/' + currentUser.uid).set(currentData); } }
        function calculateSalaryDetails() { const basic = currentUser.basic, gross = currentUser.gross, totalOT = parseFloat(document.getElementById('calc-total-ot').innerText), otRate = (basic / 208) * 2, otAmount = Math.round(totalOT * otRate), bonus = document.getElementById('check-att-bonus').checked ? currentUser.attendanceBonus : 0, bills = parseFloat(document.getElementById('other-bills').innerText); ['res-basic','res-house','res-med','res-ot-rate','res-ot-total','res-bonus','res-bills','res-grand-total'].forEach(id => { const values = {'res-basic':basic,'res-house':Math.round(basic*0.5),'res-med':Math.round(basic*0.1),'res-ot-rate':otRate.toFixed(2),'res-ot-total':otAmount,'res-bonus':bonus,'res-bills':bills,'res-grand-total':Math.round(gross+otAmount+bonus+bills)}; document.getElementById(id).innerText = values[id]; }); document.getElementById('calc-result').classList.remove('hidden'); document.getElementById('calc-result').scrollIntoView({behavior:'smooth'}); }

        // --- PROFILE EDIT ---
        function saveProfileEdit() { const now = Date.now(); if ((now - (currentUser.lastProfileEdit || 0)) / (1000 * 3600 * 24) < 7) { alert(`‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§`); return; } const updates = { name: document.getElementById('edit-name').value, designation: document.getElementById('edit-desig').value, grade: document.getElementById('edit-grade').value, gross: parseFloat(document.getElementById('edit-gross').value), lastProfileEdit: now }; db.ref('users/' + currentUser.uid).update(updates).then(() => { alert("‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); currentUser = {...currentUser, ...updates}; fillProfileUI(); closeModal('edit-profile-modal'); }); }
        
        // --- HELPERS ---
        function toggleOtHoursInput() { document.getElementById('ot-hours-container').style.display = (document.getElementById('ot-type').value === 'Absent') ? 'none' : 'block'; }
        function navTo(pageId) { document.querySelectorAll('.page').forEach(el => el.classList.remove('active')); document.getElementById(pageId).classList.add('active'); document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active')); const index = ['home','overtime','calculator','list','profile'].indexOf(pageId); if(index >= 0) document.querySelectorAll('.nav-item')[index].classList.add('active'); }
        function openModal(id) { document.getElementById(id).classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }
        function toggleDarkMode() { document.body.classList.toggle('light-mode'); }
    </script>
</body>
</html>        
        .page-content {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }
        
        .page-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        .btn-pulse:active {
            animation: pulse 0.3s ease;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .glass {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        input, select, button {
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            transform: scale(1.02);
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        .step-form {
            display: none;
        }
        
        .step-form.active {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .nav-item.active svg {
            color: #fbbf24;
        }
        
        .nav-item.active span {
            color: #fbbf24;
        }
        
        .theme-option {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .theme-option:hover {
            transform: scale(1.1);
        }
        
        .theme-option.active {
            border-color: white;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .plan-card {
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .plan-card:hover {
            transform: translateY(-10px);
            border-color: rgba(255, 255, 255, 0.8);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .plan-card.active {
            border-color: white;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .subscription-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 999;
        }
    </style>
</head>
<body class="min-h-screen">
    
    <!-- Auth Page -->
    <div id="authPage" class="page active">
        <div class="min-h-screen flex items-center justify-center p-4">
            <div class="glass rounded-3xl p-8 w-full max-w-md relative">
                <!-- Language Toggle Button for Auth Page -->
                <button onclick="toggleAuthLanguage()" class="absolute top-4 right-4 bg-white bg-opacity-20 text-white px-3 py-2 rounded-lg flex items-center gap-2 btn-pulse">
                    <span>üåê</span>
                    <span id="authLangText">EN</span>
                </button>

                <div class="text-center mb-8">
                    <img src="https://i.postimg.cc/kGZ8J76f/logo.png" alt="Garments OT" class="w-20 h-20 rounded-full mx-auto mb-4">
                    <h1 class="text-3xl font-bold text-white mb-2" data-en="Garments OT" data-bn="‡¶ó‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏ OT">Garments OT</h1>
                    <p class="text-white text-opacity-80" data-en="Overtime Calculator" data-bn="‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞">Overtime Calculator</p>
                </div>
                
                <!-- Login Form -->
                <div id="loginForm">
                    <h2 class="text-2xl font-bold text-white mb-6 text-center" data-en="Login" data-bn="‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Login</h2>
                    <div class="space-y-4">
                        <input type="tel" id="loginPhone" placeholder="Phone Number" data-en-placeholder="Phone Number" data-bn-placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                        <input type="password" id="loginPin" placeholder="PIN Number" data-en-placeholder="PIN Number" data-bn-placeholder="‡¶™‡¶ø‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞" maxlength="4" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                        <button onclick="login()" class="w-full py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold btn-pulse" data-en="Login" data-bn="‡¶≤‡¶ó‡¶á‡¶®">Login</button>
                        <button onclick="showSignup()" class="w-full py-3 bg-white bg-opacity-20 text-white rounded-xl font-bold btn-pulse" data-en="Create New Account" data-bn="‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®">Create New Account</button>
                    </div>
                </div>
                
                <!-- Signup Form -->
                <div id="signupForm" style="display: none;">
                    <h2 class="text-2xl font-bold text-white mb-6 text-center" data-en="Sign Up" data-bn="‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®">Sign Up</h2>
                    
                    <div id="step1" class="step-form active">
                        <label class="text-white mb-2 block" data-en="Phone Number" data-bn="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">Phone Number</label>
                        <input type="tel" id="signupPhone" placeholder="01XXXXXXXXX" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none mb-4">
                        <button onclick="nextStep(2)" class="w-full py-3 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold btn-pulse" data-en="Next" data-bn="‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ">Next</button>
                    </div>
                    
                    <div id="step2" class="step-form">
                        <label class="text-white mb-2 block" data-en="Name" data-bn="‡¶®‡¶æ‡¶Æ">Name</label>
                        <input type="text" id="signupName" placeholder="Your Name" data-en-placeholder="Your Name" data-bn-placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none mb-4">
                        <button onclick="nextStep(3)" class="w-full py-3 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold btn-pulse" data-en="Next" data-bn="‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ">Next</button>
                    </div>
                    
                    <div id="step3" class="step-form">
                        <label class="text-white mb-2 block" data-en="Position" data-bn="‡¶™‡¶¶‡¶¨‡¶ø">Position</label>
                        <select id="signupPosition" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none mb-4">
                            <option value="">Select Position</option>
                            <option value="Operator">Operator</option>
                            <option value="Helper">Helper</option>
                            <option value="Iron Man">Iron Man</option>
                            <option value="Quality">Quality</option>
                            <option value="PM">PM</option>
                            <option value="GM">GM</option>
                            <option value="AGM">AGM</option>
                            <option value="Line Chief">Line Chief</option>
                            <option value="Supervisor">Supervisor</option>
                        </select>
                        <button onclick="nextStep(4)" class="w-full py-3 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold btn-pulse" data-en="Next" data-bn="‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ">Next</button>
                    </div>
                    
                    <div id="step4" class="step-form">
                        <label class="text-white mb-2 block" data-en="Grade" data-bn="‡¶ó‡ßç‡¶∞‡ßá‡¶°">Grade</label>
                        <select id="signupGrade" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none mb-4">
                            <option value="">Select Grade</option>
                            <option value="Grade 1">Grade 1</option>
                            <option value="Grade 2">Grade 2</option>
                            <option value="Grade 3">Grade 3</option>
                            <option value="Grade 4">Grade 4</option>
                        </select>
                        <button onclick="nextStep(5)" class="w-full py-3 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold btn-pulse" data-en="Next" data-bn="‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ">Next</button>
                    </div>
                    
                    <div id="step5" class="step-form">
                        <label class="text-white mb-2 block" data-en="Monthly Salary (TK)" data-bn="‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶® (‡¶ü‡¶æ‡¶ï‡¶æ)">Monthly Salary (TK)</label>
                        <input type="number" id="signupSalary" placeholder="12500" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none mb-4">
                        <button onclick="nextStep(6)" class="w-full py-3 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold btn-pulse" data-en="Next" data-bn="‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ">Next</button>
                    </div>
                    
                    <div id="step6" class="step-form">
                        <label class="text-white mb-2 block" data-en="PIN Number (4 Digits)" data-bn="‡¶™‡¶ø‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (‡ß™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü)">PIN Number (4 Digits)</label>
                        <input type="password" id="signupPin" placeholder="****" maxlength="4" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none mb-4">
                        <button onclick="signup()" class="w-full py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold btn-pulse" data-en="Complete Signup" data-bn="‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Complete Signup</button>
                    </div>
                    
                    <button onclick="showLogin()" class="w-full py-2 mt-4 text-white text-opacity-80 btn-pulse" data-en="Back to Login" data-bn="‡¶≤‡¶ó‡¶á‡¶®‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®">Back to Login</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main App -->
    <div id="mainApp" class="page">
        
        <!-- Subscription Status -->
        <div class="subscription-status" id="subscriptionStatus" style="display: none;">
            <span id="statusText">Free Plan</span>
        </div>

        <!-- Home Page -->
        <div id="homePage" class="page-content active pb-24">
            <div class="p-6">
                <!-- Header -->
                <div class="glass rounded-3xl p-6 mb-6 slide-in">
                    <h2 class="text-white text-opacity-80 mb-2" data-en="Welcome" data-bn="‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ">Welcome</h2>
                    <h1 class="text-3xl font-bold text-white mb-4" id="userName">User</h1>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl p-4 card-hover">
                            <p class="text-white text-opacity-90 text-sm" data-en="Total Overtime" data-bn="‡¶Æ‡ßã‡¶ü ‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ">Total Overtime</p>
                            <p class="text-3xl font-bold text-white" id="totalOT">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-green-400 to-blue-500 rounded-2xl p-4 card-hover">
                            <p class="text-white text-opacity-90 text-sm" data-en="Estimated Salary" data-bn="‡¶Ü‡¶®‡ßÅ‡¶Æ‡¶æ‡¶®‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶®">Estimated Salary</p>
                            <p class="text-2xl font-bold text-white" id="estimatedSalary">‡ß≥0</p>
                        </div>
                        <div class="bg-gradient-to-br from-pink-400 to-red-500 rounded-2xl p-4 card-hover">
                            <p class="text-white text-opacity-90 text-sm" data-en="Attendance Bonus" data-bn="‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏">Attendance Bonus</p>
                            <p class="text-3xl font-bold text-white">‡ß≥<span id="attendanceBonusHome">725</span></p>
                        </div>
                        <div class="bg-gradient-to-br from-indigo-400 to-purple-500 rounded-2xl p-4 card-hover">
                            <p class="text-white text-opacity-90 text-sm" data-en="Other Benefits" data-bn="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ">Other Benefits</p>
                            <p class="text-2xl font-bold text-white" id="otherBenefits">‡ß≥0</p>
                        </div>
                    </div>
                </div>
                
                <!-- Public Holidays -->
                <div class="glass rounded-3xl p-6 slide-in">
                    <h3 class="text-xl font-bold text-white mb-4" data-en="üìÖ Public Holidays This Month" data-bn="üìÖ ‡¶ö‡¶≤‡¶§‡¶ø ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶õ‡ßÅ‡¶ü‡¶ø">üìÖ Public Holidays This Month</h3>
                    <div id="holidaysList" class="space-y-3">
                        <!-- Holidays will be populated here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Overtime Page -->
        <div id="overtimePage" class="page-content pb-24">
            <div class="p-6">
                <div class="glass rounded-3xl p-6 mb-6">
                    <h2 class="text-2xl font-bold text-white mb-6" data-en="Add Overtime" data-bn="‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®">Add Overtime</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="text-white mb-2 block" data-en="Select Date" data-bn="‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Select Date</label>
                            <input type="date" id="otDate" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                        </div>
                        
                        <div>
                            <label class="text-white mb-2 block" data-en="Select Type" data-bn="‡¶ß‡¶∞‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Select Type</label>
                            <select id="otType" onchange="handleOTTypeChange()" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                                <option value="" data-en="Select" data-bn="‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Select</option>
                                <option value="day" data-en="Day" data-bn="‡¶¶‡¶ø‡¶®">Day</option>
                                <option value="night" data-en="Night" data-bn="‡¶∞‡¶æ‡¶§">Night</option>
                                <option value="friday" data-en="Friday" data-bn="‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞">Friday</option>
                                <option value="absent" data-en="Absent" data-bn="‡¶Ö‡¶®‡ßÅ‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§">Absent</option>
                            </select>
                        </div>
                        
                        <div id="fridayOptions" style="display: none;">
                            <label class="text-white mb-2 block" data-en="Friday Status" data-bn="‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏">Friday Status</label>
                            <select id="fridayType" onchange="handleFridayChange()" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                                <option value="">Select</option>
                                <option value="open">Open</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                        
                        <div id="otHoursDiv">
                            <label class="text-white mb-2 block" data-en="Overtime Hours" data-bn="‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ">Overtime Hours</label>
                            <input type="number" id="otHours" step="0.5" placeholder="2" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                        </div>
                        
                        <button onclick="addOT()" class="w-full py-4 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold text-lg btn-pulse" data-en="Add" data-bn="‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®">Add</button>
                    </div>
                </div>

                <!-- Tiffin & Night Bill -->
                <div class="glass rounded-3xl p-6">
                    <h2 class="text-2xl font-bold text-white mb-6" data-en="Add Tiffin & Night Bill" data-bn="‡¶ü‡¶ø‡¶´‡¶ø‡¶® ‡¶ì ‡¶®‡¶æ‡¶á‡¶ü ‡¶¨‡¶ø‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®">Add Tiffin & Night Bill</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="text-white mb-2 block" data-en="Select Date" data-bn="‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Select Date</label>
                            <input type="date" id="billDate" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Select Bill Type" data-bn="‡¶¨‡¶ø‡¶≤ ‡¶ß‡¶∞‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Select Bill Type</label>
                            <select id="billType" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                                <option value="">Select</option>
                                <option value="tiffin" data-en="Tiffin Bill" data-bn="‡¶ü‡¶ø‡¶´‡¶ø‡¶® ‡¶¨‡¶ø‡¶≤">Tiffin Bill</option>
                                <option value="night" data-en="Night Bill" data-bn="‡¶®‡¶æ‡¶á‡¶ü ‡¶¨‡¶ø‡¶≤">Night Bill</option>
                            </select>
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Amount (TK)" data-bn="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡¶ü‡¶æ‡¶ï‡¶æ)">Amount (TK)</label>
                            <input type="number" id="billAmount" placeholder="100" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                        </div>

                        <button onclick="addBill()" class="w-full py-4 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold text-lg btn-pulse" data-en="Add Bill" data-bn="‡¶¨‡¶ø‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®">Add Bill</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Calculator Page -->
        <div id="calculatorPage" class="page-content pb-24">
            <div class="p-6">
                <div class="glass rounded-3xl p-6 mb-6">
                    <h2 class="text-2xl font-bold text-white mb-6" data-en="Salary Calculation" data-bn="‡¶¨‡ßá‡¶§‡¶® ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨">Salary Calculation</h2>
                    
                    <div class="bg-gradient-to-br from-purple-400 to-pink-400 rounded-2xl p-6 mb-6">
                        <p class="text-white text-opacity-90 text-sm" data-en="Total Salary" data-bn="‡¶Æ‡ßã‡¶ü ‡¶¨‡ßá‡¶§‡¶®">Total Salary</p>
                        <p class="text-4xl font-bold text-white" id="calcTotalSalary">‡ß≥0</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl p-6 mb-6">
                        <p class="text-white text-opacity-90 text-sm" data-en="Total Overtime" data-bn="‡¶Æ‡ßã‡¶ü ‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ">Total Overtime</p>
                        <p class="text-3xl font-bold text-white" id="calcTotalOT">0 hours</p>
                    </div>
                    
                    <button onclick="calculateSalary()" class="w-full py-4 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold text-lg btn-pulse mb-6" data-en="Calculate" data-bn="‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡ßÅ‡¶®">Calculate</button>
                    
                    <div id="salaryBreakdown" style="display: none;" class="space-y-3">
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="Basic Salary" data-bn="‡¶Æ‡ßÇ‡¶≤ ‡¶¨‡ßá‡¶§‡¶®">Basic Salary</span>
                            <span class="text-white font-bold" id="basicSalary">‡ß≥0</span>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="House Rent" data-bn="‡¶¨‡¶æ‡¶°‡¶º‡¶ø ‡¶≠‡¶æ‡¶°‡¶º‡¶æ">House Rent</span>
                            <span class="text-white font-bold" id="houseRent">‡ß≥0</span>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="Medical Allowance" data-bn="‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶≠‡¶æ‡¶§‡¶æ">Medical Allowance</span>
                            <span class="text-white font-bold" id="medical">‡ß≥0</span>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="OT Rate (per hour)" data-bn="OT ‡¶∞‡ßá‡¶ü (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ò‡¶£‡ßç‡¶ü‡¶æ)">OT Rate (per hour)</span>
                            <span class="text-white font-bold" id="otRate">‡ß≥0</span>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="OT Amount" data-bn="OT ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">OT Amount</span>
                            <span class="text-white font-bold" id="otAmount">‡ß≥0</span>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="Attendance Bonus" data-bn="‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏">Attendance Bonus</span>
                            <span class="text-white font-bold" id="attendanceBonusCalc">‡ß≥0</span>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="Tiffin Bill" data-bn="‡¶ü‡¶ø‡¶´‡¶ø‡¶® ‡¶¨‡¶ø‡¶≤">Tiffin Bill</span>
                            <span class="text-white font-bold" id="tiffinBillCalc">‡ß≥0</span>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-xl p-4 flex justify-between">
                            <span class="text-white" data-en="Night Bill" data-bn="‡¶®‡¶æ‡¶á‡¶ü ‡¶¨‡¶ø‡¶≤">Night Bill</span>
                            <span class="text-white font-bold" id="nightBillCalc">‡ß≥0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- List Page -->
        <div id="listPage" class="page-content pb-24">
            <div class="p-6">
                <div class="glass rounded-3xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-white" data-en="Overtime List" data-bn="‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ">Overtime List</h2>
                    </div>
                    
                    <div class="mb-6">
                        <label class="text-white mb-2 block" data-en="Select Month" data-bn="‡¶Æ‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Select Month</label>
                        <input type="month" id="listMonth" onchange="loadOTList()" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                    </div>
                    
                    <div id="monthlySummary" class="grid grid-cols-2 gap-3 mb-6">
                        <div class="bg-gradient-to-br from-purple-400 to-pink-400 rounded-xl p-3">
                            <p class="text-white text-opacity-90 text-xs" data-en="Total OT Hours" data-bn="‡¶Æ‡ßã‡¶ü OT ‡¶ò‡¶£‡ßç‡¶ü‡¶æ">Total OT Hours</p>
                            <p class="text-2xl font-bold text-white" id="summaryTotalOT">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl p-3">
                            <p class="text-white text-opacity-90 text-xs" data-en="Day Shifts" data-bn="‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∂‡¶ø‡¶´‡¶ü">Day Shifts</p>
                            <p class="text-2xl font-bold text-white" id="summaryDay">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl p-3">
                            <p class="text-white text-opacity-90 text-xs" data-en="Night Shifts" data-bn="‡¶∞‡¶æ‡¶§‡ßá‡¶∞ ‡¶∂‡¶ø‡¶´‡¶ü">Night Shifts</p>
                            <p class="text-2xl font-bold text-white" id="summaryNight">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-green-400 to-teal-500 rounded-xl p-3">
                            <p class="text-white text-opacity-90 text-xs" data-en="Fridays" data-bn="‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞">Fridays</p>
                            <p class="text-2xl font-bold text-white" id="summaryFriday">0</p>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full text-white">
                            <thead>
                                <tr class="border-b border-white border-opacity-20">
                                    <th class="py-3 text-left" data-en="Date" data-bn="‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ">Date</th>
                                    <th class="py-3 text-left" data-en="Type" data-bn="‡¶ß‡¶∞‡¶®">Type</th>
                                    <th class="py-3 text-left" data-en="Hours" data-bn="‡¶ò‡¶£‡ßç‡¶ü‡¶æ">Hours</th>
                                    <th class="py-3 text-left" data-en="Action" data-bn="‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®">Action</th>
                                </tr>
                            </thead>
                            <tbody id="otListTable">
                                <!-- OT list will be populated here -->
                            </tbody>
                        </table>
                    </div>

                    <hr class="border-white border-opacity-20 my-6">

                    <h3 class="text-xl font-bold text-white mb-4" data-en="Bills" data-bn="‡¶¨‡¶ø‡¶≤">Bills</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-white">
                            <thead>
                                <tr class="border-b border-white border-opacity-20">
                                    <th class="py-3 text-left" data-en="Date" data-bn="‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ">Date</th>
                                    <th class="py-3 text-left" data-en="Type" data-bn="‡¶ß‡¶∞‡¶®">Type</th>
                                    <th class="py-3 text-left" data-en="Amount" data-bn="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">Amount</th>
                                    <th class="py-3 text-left" data-en="Action" data-bn="‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®">Action</th>
                                </tr>
                            </thead>
                            <tbody id="billListTable">
                                <!-- Bill list will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Profile Page -->
        <div id="profilePage" class="page-content pb-24">
            <div class="p-6">
                <!-- Profile Card -->
                <div class="glass rounded-3xl p-6 mb-6 text-center slide-in">
                    <div class="w-24 h-24 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <span class="text-4xl text-white" id="profileInitial">U</span>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-2" id="profileName">User</h2>
                    <p class="text-white text-opacity-80" id="profilePhone">+880XXXXXXXXXX</p>
                    <p class="text-white text-opacity-80" id="profilePosition">Position</p>
                    <p class="text-white text-opacity-80" id="profileGrade">Grade</p>
                </div>
                
                <!-- Theme Selection -->
                <div class="glass rounded-3xl p-6 mb-4">
                    <h3 class="text-xl font-bold text-white mb-4" data-en="Choose Theme" data-bn="‡¶•‡¶ø‡¶Æ ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶ï‡¶∞‡ßÅ‡¶®">Choose Theme</h3>
                    <div class="grid grid-cols-5 gap-3">
                        <div class="theme-option active" onclick="changeTheme('default')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" data-theme="default"></div>
                        <div class="theme-option" onclick="changeTheme('ocean')" style="background: linear-gradient(135deg, #2E3192 0%, #1BFFFF 100%);" data-theme="ocean"></div>
                        <div class="theme-option" onclick="changeTheme('sunset')" style="background: linear-gradient(135deg, #FF512F 0%, #F09819 100%);" data-theme="sunset"></div>
                        <div class="theme-option" onclick="changeTheme('forest')" style="background: linear-gradient(135deg, #134E5E 0%, #71B280 100%);" data-theme="forest"></div>
                        <div class="theme-option" onclick="changeTheme('rose')" style="background: linear-gradient(135deg, #F857A6 0%, #FF5858 100%);" data-theme="rose"></div>
                        <div class="theme-option" onclick="changeTheme('night')" style="background: linear-gradient(135deg, #000428 0%, #004e92 100%);" data-theme="night"></div>
                        <div class="theme-option" onclick="changeTheme('candy')" style="background: linear-gradient(135deg, #D3CCE3 0%, #E9E4F0 100%);" data-theme="candy"></div>
                        <div class="theme-option" onclick="changeTheme('mint')" style="background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);" data-theme="mint"></div>
                        <div class="theme-option" onclick="changeTheme('fire')" style="background: linear-gradient(135deg, #f12711 0%, #f5af19 100%);" data-theme="fire"></div>
                        <div class="theme-option" onclick="changeTheme('purple')" style="background: linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%);" data-theme="purple"></div>
                    </div>
                </div>
                
                <!-- Settings -->
                <div class="space-y-3">
                    <div onclick="showEditProfile()" class="glass rounded-2xl p-4 flex items-center card-hover cursor-pointer">
                        <span class="text-2xl mr-3">‚úèÔ∏è</span>
                        <span class="text-white font-medium" data-en="Edit Profile" data-bn="‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ">Edit Profile</span>
                    </div>

                    <div onclick="showSubscription()" class="glass rounded-2xl p-4 flex items-center card-hover cursor-pointer">
                        <span class="text-2xl mr-3">‚≠ê</span>
                        <span class="text-white font-medium" data-en="Subscription Plan" data-bn="‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®">Subscription Plan</span>
                    </div>

                    <div onclick="toggleDarkMode()" class="glass rounded-2xl p-4 flex items-center justify-between card-hover cursor-pointer">
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üåô</span>
                            <span class="text-white font-medium" data-en="Dark Mode" data-bn="‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°">Dark Mode</span>
                        </div>
                        <div id="darkModeToggle" class="w-12 h-6 bg-white bg-opacity-30 rounded-full relative">
                            <div class="w-5 h-5 bg-white rounded-full absolute top-0.5 left-0.5 transition-all"></div>
                        </div>
                    </div>
                    
                    <div onclick="toggleLanguage()" class="glass rounded-2xl p-4 flex items-center justify-between card-hover cursor-pointer">
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üåê</span>
                            <span class="text-white font-medium" data-en="Language" data-bn="‡¶≠‡¶æ‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®">Language</span>
                        </div>
                        <span class="text-white text-opacity-80" id="currentLang">English</span>
                    </div>
                    
                    <div onclick="showHelp()" class="glass rounded-2xl p-4 flex items-center card-hover cursor-pointer">
                        <span class="text-2xl mr-3">‚ùì</span>
                        <span class="text-white font-medium" data-en="Help" data-bn="‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø">Help</span>
                    </div>
                    
                    <div onclick="showPrivacy()" class="glass rounded-2xl p-4 flex items-center card-hover cursor-pointer">
                        <span class="text-2xl mr-3">üîí</span>
                        <span class="text-white font-medium" data-en="Privacy Policy" data-bn="‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø">Privacy Policy</span>
                    </div>
                    
                    <div onclick="showAbout()" class="glass rounded-2xl p-4 flex items-center card-hover cursor-pointer">
                        <span class="text-2xl mr-3">‚ÑπÔ∏è</span>
                        <span class="text-white font-medium" data-en="About Us" data-bn="‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá">About Us</span>
                    </div>

                    <div onclick="openUpdateLink()" class="glass rounded-2xl p-4 flex items-center card-hover cursor-pointer bg-blue-500 bg-opacity-30">
                        <span class="text-2xl mr-3">üì≤</span>
                        <span class="text-white font-medium" data-en="Update App" data-bn="‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®">Update App</span>
                    </div>

                    <div class="glass rounded-2xl p-4 text-center">
                        <p class="text-white text-opacity-80 text-sm" data-en="App Version" data-bn="‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡¶∞‡¶£">App Version</p>
                        <p class="text-white font-bold">v1.0.0</p>
                    </div>
                    
                    <div onclick="logout()" class="glass rounded-2xl p-4 flex items-center card-hover cursor-pointer bg-red-500 bg-opacity-30">
                        <span class="text-2xl mr-3">üö™</span>
                        <span class="text-white font-medium" data-en="Logout" data-bn="‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü">Logout</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Profile Page -->
        <div id="editProfilePage" class="page-content pb-24">
            <div class="p-6">
                <div class="glass rounded-3xl p-6">
                    <h2 class="text-2xl font-bold text-white mb-6" data-en="Edit Profile" data-bn="‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ">Edit Profile</h2>
                    
                    <div id="editLocked" style="display: none;" class="bg-red-500 bg-opacity-30 rounded-xl p-4 mb-6 text-white">
                        <p data-en="You can edit your profile after 15 days" data-bn="‡•ß‡•´ ‡¶¶‡¶ø‡¶® ‡¶™‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®">You can edit your profile after 15 days</p>
                        <p class="text-sm mt-2" id="editUnlockDate"></p>
                    </div>

                    <div id="editForm" class="space-y-4">
                        <div>
                            <label class="text-white mb-2 block" data-en="Name" data-bn="‡¶®‡¶æ‡¶Æ">Name</label>
                            <input type="text" id="editName" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Position" data-bn="‡¶™‡¶¶‡¶¨‡¶ø">Position</label>
                            <select id="editPosition" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                                <option value="Operator">Operator</option>
                                <option value="Helper">Helper</option>
                                <option value="Iron Man">Iron Man</option>
                                <option value="Quality">Quality</option>
                                <option value="PM">PM</option>
                                <option value="GM">GM</option>
                                <option value="AGM">AGM</option>
                                <option value="Line Chief">Line Chief</option>
                                <option value="Supervisor">Supervisor</option>
                            </select>
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Grade" data-bn="‡¶ó‡ßç‡¶∞‡ßá‡¶°">Grade</label>
                            <select id="editGrade" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                                <option value="Grade 1">Grade 1</option>
                                <option value="Grade 2">Grade 2</option>
                                <option value="Grade 3">Grade 3</option>
                                <option value="Grade 4">Grade 4</option>
                            </select>
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Monthly Salary (TK)" data-bn="‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶® (‡¶ü‡¶æ‡¶ï‡¶æ)">Monthly Salary (TK)</label>
                            <input type="number" id="editSalary" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                        </div>

                        <button onclick="saveProfile()" class="w-full py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold btn-pulse" data-en="Save Changes" data-bn="‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®">Save Changes</button>
                    </div>

                    <hr class="border-white border-opacity-20 my-6">

                    <h3 class="text-xl font-bold text-white mb-4" data-en="Change PIN" data-bn="‡¶™‡¶ø‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Change PIN</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="text-white mb-2 block" data-en="Current PIN" data-bn="‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶ø‡¶®">Current PIN</label>
                            <input type="password" id="currentPin" maxlength="4" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="New PIN" data-bn="‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶ø‡¶®">New PIN</label>
                            <input type="password" id="newPin" maxlength="4" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Confirm PIN" data-bn="‡¶™‡¶ø‡¶® ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®">Confirm PIN</label>
                            <input type="password" id="confirmPin" maxlength="4" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white outline-none">
                        </div>

                        <button onclick="changePIN()" class="w-full py-3 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold btn-pulse" data-en="Change PIN" data-bn="‡¶™‡¶ø‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Change PIN</button>
                    </div>

                    <button onclick="showPage('profile')" class="w-full py-3 mt-6 bg-white bg-opacity-20 text-white rounded-xl font-bold btn-pulse" data-en="Back to Profile" data-bn="‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®">Back to Profile</button>
                </div>
            </div>
        </div>

        <!-- Subscription Page -->
        <div id="subscriptionPage" class="page-content pb-24">
            <div class="p-6">
                <div class="glass rounded-3xl p-6">
                    <h2 class="text-2xl font-bold text-white mb-6 text-center" data-en="Subscription Plans" data-bn="‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®">Subscription Plans</h2>

                    <div class="grid grid-cols-1 gap-4 mb-8">
                        <!-- Basic Plan -->
                        <div class="plan-card glass rounded-2xl p-6 cursor-pointer" onclick="selectPlan('basic')">
                            <h3 class="text-xl font-bold text-white mb-2">Basic</h3>
                            <p class="text-3xl font-bold text-white mb-2">‡ß≥50</p>
                            <p class="text-white text-opacity-80 text-sm mb-4">1 Month</p>
                            <ul class="text-white text-sm space-y-2 mb-4">
                                <li>‚úÖ Ad Free</li>
                                <li>‚úÖ Smooth & Fast</li>
                            </ul>
                        </div>

                        <!-- Premium Plan -->
                        <div class="plan-card glass rounded-2xl p-6 cursor-pointer" onclick="selectPlan('premium')">
                            <h3 class="text-xl font-bold text-white mb-2">Premium</h3>
                            <p class="text-3xl font-bold text-white mb-2">‡ß≥200</p>
                            <p class="text-white text-opacity-80 text-sm mb-4">6 Months</p>
                            <ul class="text-white text-sm space-y-2 mb-4">
                                <li>‚úÖ Ad Free</li>
                                <li>‚úÖ Smooth & Fast</li>
                                <li>‚úÖ Priority Support</li>
                            </ul>
                        </div>

                        <!-- Pro Plan -->
                        <div class="plan-card glass rounded-2xl p-6 cursor-pointer" onclick="selectPlan('pro')">
                            <h3 class="text-xl font-bold text-white mb-2">Pro</h3>
                            <p class="text-3xl font-bold text-white mb-2">‡ß≥500</p>
                            <p class="text-white text-opacity-80 text-sm mb-4">12 Months</p>
                            <ul class="text-white text-sm space-y-2 mb-4">
                                <li>‚úÖ Ad Free</li>
                                <li>‚úÖ Smooth & Fast</li>
                                <li>‚úÖ Priority Support</li>
                                <li>‚úÖ Premium Features</li>
                            </ul>
                        </div>

                        <!-- Ultra Plan -->
                        <div class="plan-card glass rounded-2xl p-6 cursor-pointer" onclick="selectPlan('ultra')">
                            <h3 class="text-xl font-bold text-white mb-2">Ultra</h3>
                            <p class="text-3xl font-bold text-white mb-2">‡ß≥1500</p>
                            <p class="text-white text-opacity-80 text-sm mb-4">Unlimited</p>
                            <ul class="text-white text-sm space-y-2 mb-4">
                                <li>‚úÖ Ad Free</li>
                                <li>‚úÖ Smooth & Fast</li>
                                <li>‚úÖ Premium Support</li>
                                <li>‚úÖ All Features</li>
                                <li>‚úÖ Lifetime Access</li>
                            </ul>
                        </div>
                    </div>

                    <button onclick="proceedPayment()" class="w-full py-4 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold text-lg btn-pulse" id="proceedBtn" style="display: none;" data-en="Proceed to Payment" data-bn="‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶Ø‡¶æ‡¶®">Proceed to Payment</button>

                    <button onclick="showPage('profile')" class="w-full py-3 mt-4 bg-white bg-opacity-20 text-white rounded-xl font-bold btn-pulse" data-en="Back to Profile" data-bn="‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®">Back to Profile</button>
                </div>
            </div>
        </div>

        <!-- Payment Page -->
        <div id="paymentPage" class="page-content pb-24">
            <div class="p-6">
                <div class="glass rounded-3xl p-6">
                    <h2 class="text-2xl font-bold text-white mb-6" id="paymentTitle">Payment</h2>

                    <div class="space-y-4 mb-6">
                        <h3 class="text-lg font-bold text-white" data-en="Select Payment Method" data-bn="‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">Select Payment Method</h3>
                        
                        <div class="space-y-3">
                            <button onclick="selectPaymentMethod('bkash')" class="w-full glass rounded-2xl p-4 text-left flex items-center justify-between btn-pulse" id="bkashBtn">
                                <span class="text-white font-bold">üì± Bkash</span>
                                <span class="text-white text-opacity-80">01922979250</span>
                            </button>
                            <button onclick="selectPaymentMethod('nagad')" class="w-full glass rounded-2xl p-4 text-left flex items-center justify-between btn-pulse" id="nagadBtn">
                                <span class="text-white font-bold">üì± Nagad</span>
                                <span class="text-white text-opacity-80">01922979250</span>
                            </button>
                            <button onclick="selectPaymentMethod('rocket')" class="w-full glass rounded-2xl p-4 text-left flex items-center justify-between btn-pulse" id="rocketBtn">
                                <span class="text-white font-bold">üì± Rocket</span>
                                <span class="text-white text-opacity-80">019229792500</span>
                            </button>
                            <button onclick="selectPaymentMethod('upay')" class="w-full glass rounded-2xl p-4 text-left flex items-center justify-between btn-pulse" id="upayBtn">
                                <span class="text-white font-bold">üì± Upay</span>
                                <span class="text-white text-opacity-80">01922979250</span>
                            </button>
                        </div>
                    </div>

                    <hr class="border-white border-opacity-20 my-6">

                    <div id="paymentForm" style="display: none;" class="space-y-4">
                        <div>
                            <label class="text-white mb-2 block" data-en="Account Number" data-bn="‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">Account Number</label>
                            <input type="text" id="accountNumber" placeholder="Your Account Number" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Transaction ID" data-bn="‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø">Transaction ID</label>
                            <input type="text" id="transactionId" placeholder="Your Transaction ID" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Last 4 Digits of Your Number" data-bn="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡•™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü">Last 4 Digits of Your Number</label>
                            <input type="text" id="lastFourDigits" maxlength="4" placeholder="1234" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                        </div>

                        <div>
                            <label class="text-white mb-2 block" data-en="Screenshot Image URL" data-bn="‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶á‡¶Æ‡ßá‡¶ú URL">Screenshot Image URL</label>
                            <div class="flex gap-2">
                                <input type="text" id="screenshotUrl" placeholder="Paste image URL from postimages.org" class="flex-1 px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 outline-none">
                                <button onclick="showImageUploadInfo()" class="px-4 py-3 bg-blue-500 text-white rounded-xl font-bold btn-pulse">?</button>
                            </div>
                        </div>

                        <button onclick="submitPayment()" class="w-full py-4 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold text-lg btn-pulse" data-en="Submit Payment" data-bn="‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®">Submit Payment</button>
                    </div>

                    <button onclick="showPage('subscription')" class="w-full py-3 mt-4 bg-white bg-opacity-20 text-white rounded-xl font-bold btn-pulse" data-en="Back to Plans" data-bn="‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®">Back to Plans</button>
                </div>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="fixed bottom-0 left-0 right-0 glass border-t border-white border-opacity-20 px-4 py-3">
            <div class="flex justify-around items-center max-w-md mx-auto">
                <div onclick="showPage('home')" class="nav-item active flex flex-col items-center cursor-pointer btn-pulse">
                    <svg class="w-6 h-6 text-white mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-white text-xs" data-en="Home" data-bn="‡¶π‡ßã‡¶Æ">Home</span>
                </div>
                <div onclick="showPage('overtime')" class="nav-item flex flex-col items-center cursor-pointer btn-pulse">
                    <svg class="w-6 h-6 text-white mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    <span class="text-white text-xs" data-en="Overtime" data-bn="‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ">Overtime</span>
                </div>
                <div onclick="showPage('calculator')" class="nav-item flex flex-col items-center cursor-pointer btn-pulse">
                    <svg class="w-6 h-6 text-white mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                    <span class="text-white text-xs" data-en="Calculator" data-bn="‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞">Calculator</span>
                </div>
                <div onclick="showPage('list')" class="nav-item flex flex-col items-center cursor-pointer btn-pulse">
                    <svg class="w-6 h-6 text-white mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                    </svg>
                    <span class="text-white text-xs" data-en="List" data-bn="‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ">List</span>
                </div>
                <div onclick="showPage('profile')" class="nav-item flex flex-col items-center cursor-pointer btn-pulse">
                    <svg class="w-6 h-6 text-white mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="text-white text-xs" data-en="Profile" data-bn="‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤">Profile</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <div id="attendanceBonusModal" class="modal">
        <div class="glass rounded-3xl p-8 max-w-md mx-4">
            <h2 class="text-2xl font-bold text-white mb-4 text-center" data-en="Attendance Bonus" data-bn="‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏">Attendance Bonus</h2>
            <p class="text-white mb-6 text-center" data-en="Do you have attendance bonus?" data-bn="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø?">Do you have attendance bonus?</p>
            <div class="space-y-3">
                <button onclick="calculateWithBonus(true)" class="w-full py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold btn-pulse" data-en="Yes" data-bn="‡¶π‡ßç‡¶Ø‡¶æ‡¶Å">Yes</button>
                <button onclick="calculateWithBonus(false)" class="w-full py-3 bg-white bg-opacity-20 text-white rounded-xl font-bold btn-pulse" data-en="No" data-bn="‡¶®‡¶æ">No</button>
            </div>
        </div>
    </div>

    <div id="welcomeModal" class="modal">
        <div class="glass rounded-3xl p-8 max-w-md mx-4 max-h-96 overflow-y-auto">
            <h2 class="text-2xl font-bold text-white mb-4 text-center" data-en="Welcome to Garments OT" data-bn="‡¶ó‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏ OT ‡¶è ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ">Welcome to Garments OT</h2>
            <div class="text-white space-y-3 text-sm">
                <div class="bg-white bg-opacity-10 rounded-lg p-3">
                    <h3 class="font-bold mb-2">‚ú® Features:</h3>
                    <ul class="list-disc list-inside space-y-1">
                        <li data-en="Track overtime easily" data-bn="‡¶∏‡¶π‡¶ú‡ßá‡¶á ‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®">Track overtime easily</li>
                        <li data-en="Automatic salary calculation" data-bn="‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶¨‡ßá‡¶§‡¶® ‡¶ó‡¶£‡¶®‡¶æ">Automatic salary calculation</li>
                        <li data-en="Attendance bonus: ‡ß≥725" data-bn="‡¶π‡¶æ‡¶ú‡¶ø‡¶∞‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏: ‡ß≥725">Attendance bonus: ‡ß≥725</li>
                        <li data-en="Tiffin & Night Bill tracking" data-bn="‡¶ü‡¶ø‡¶´‡¶ø‡¶® ‡¶ì ‡¶®‡¶æ‡¶á‡¶ü ‡¶¨‡¶ø‡¶≤ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç">Tiffin & Night Bill tracking</li>
                        <li data-en="Bilingual interface" data-bn="‡¶¶‡ßç‡¶¨‡¶ø‡¶≠‡¶æ‡¶∑‡¶ø‡¶ï ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏">Bilingual interface</li>
                    </ul>
                </div>
            </div>
            <button onclick="closeWelcomeModal()" class="w-full py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold mt-6 btn-pulse" data-en="OK" data-bn="‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá">OK</button>
        </div>
    </div>

    <div id="imageUploadModal" class="modal">
        <div class="glass rounded-3xl p-8 max-w-md mx-4">
            <h2 class="text-2xl font-bold text-white mb-4" data-en="How to Upload Image" data-bn="‡¶á‡¶Æ‡ßá‡¶ú ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶¨‡ßá‡¶®">How to Upload Image</h2>
            <div class="text-white space-y-3 text-sm">
                <p>1. Go to https://postimages.org/</p>
                <p>2. Upload your screenshot</p>
                <p>3. Copy the image URL</p>
                <p>4. Paste it in the URL field above</p>
            </div>
            <button onclick="closeModal('imageUploadModal')" class="w-full py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold mt-6 btn-pulse" data-en="OK" data-bn="‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá">OK</button>
        </div>
    </div>

    <div id="subscriptionPendingModal" class="modal">
        <div class="glass rounded-3xl p-8 max-w-md mx-4 text-center">
            <div class="text-6xl mb-4">‚è≥</div>
            <h2 class="text-2xl font-bold text-white mb-4" data-en="Under Review" data-bn="‡¶∞‡¶ø‡¶≠‡¶ø‡¶â‡¶Ø‡¶º‡ßá‡¶∞ ‡¶Ö‡¶ß‡ßÄ‡¶®">Under Review</h2>
            <p class="text-white mb-2" data-en="Your subscription is being reviewed" data-bn="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶π‡¶ö‡ßç‡¶õ‡ßá">Your subscription is being reviewed</p>
            <p class="text-white mb-6" data-en="We will approve it within 24 hours" data-bn="‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶ü‡¶ø ‡•®‡•™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶Ø‡¶º approve ‡¶ï‡¶∞‡¶¨">We will approve it within 24 hours</p>
            <button onclick="downloadProApp()" class="w-full py-4 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl font-bold btn-pulse mb-3" data-en="üì≤ Download Pro App" data-bn="üì≤ ‡¶™‡ßç‡¶∞‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®">üì≤ Download Pro App</button>
            <button onclick="closeModal('subscriptionPendingModal')" class="w-full py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl font-bold btn-pulse" data-en="OK" data-bn="‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá">OK</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCOets_8BQkDex92Qrb21uhzrAVRXnPXms",
            authDomain: "overtime-calculator-8c926.firebaseapp.com",
            databaseURL: "https://overtime-calculator-8c926-default-rtdb.firebaseio.com",
            projectId: "overtime-calculator-8c926",
            storageBucket: "overtime-calculator-8c926.firebasestorage.app",
            messagingSenderId: "1044899871918",
            appId: "1:1044899871918:web:5493af45b9927bafaac13f"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        
        // Global Variables
        let currentUser = null;
        let currentLanguage = 'en';
        let isDarkMode = false;
        let currentTheme = 'default';
        let selectedPlan = null;
        let selectedPaymentMethod = null;
        
        // Translations
        const translations = {
            en: {
                noHolidays: 'No public holidays this month',
                fillAllFields: 'Please fill all fields',
                enterValidPhone: 'Please enter valid 11 digit phone number',
                enterName: 'Please enter your name',
                selectPosition: 'Please select position',
                selectGrade: 'Please select grade',
                enterValidSalary: 'Please enter valid salary',
                enter4DigitPin: 'Please enter 4 digit PIN',
                signupSuccess: 'Signup successful! Please login now.',
                enterPhonePin: 'Please enter phone and PIN',
                wrongPhonePin: 'Wrong phone number or PIN',
                enterOTHours: 'Please enter overtime hours',
                otAdded: 'Overtime added!',
                confirmDelete: 'Are you sure you want to delete?',
                confirmLogout: 'Are you sure you want to logout?',
                day: 'Day',
                night: 'Night',
                friday: 'Friday',
                absent: 'Absent',
                open: 'Open',
                closed: 'Closed',
                hours: 'hours',
                oldPinWrong: 'Old PIN is wrong',
                pinsNotMatch: 'PINs do not match',
                pinChanged: 'PIN changed successfully',
                editSuccess: 'Profile updated successfully',
                editLocked: 'You can edit after 15 days',
                tiffin: 'Tiffin Bill',
                night: 'Night Bill',
                billAdded: 'Bill added successfully!',
                selectBillType: 'Please select bill type',
                enterBillAmount: 'Please enter bill amount',
                selectPaymentMethod: 'Please select payment method',
                fillPaymentDetails: 'Please fill all payment details',
                paymentSubmitted: 'Payment submitted! Under review for 24 hours.'
            },
            bn: {
                noHolidays: '‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶ï‡ßã‡¶® ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶õ‡ßÅ‡¶ü‡¶ø ‡¶®‡ßá‡¶á',
                fillAllFields: '‡¶∏‡¶ï‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®',
                enterValidPhone: '‡¶∏‡¶†‡¶ø‡¶ï ‡•ß‡•ß ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®',
                enterName: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®',
                selectPosition: '‡¶™‡¶¶‡¶¨‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                selectGrade: '‡¶ó‡ßç‡¶∞‡ßá‡¶° ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                enterValidSalary: '‡¶∏‡¶†‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®',
                enter4DigitPin: '‡•™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶™‡¶ø‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®',
                signupSuccess: '‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶∏‡¶´‡¶≤ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶è‡¶ñ‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                enterPhonePin: '‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶ø‡¶® ‡¶¶‡¶ø‡¶®',
                wrongPhonePin: '‡¶≠‡ßÅ‡¶≤ ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¨‡¶æ ‡¶™‡¶ø‡¶®',
                enterOTHours: '‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ ‡¶¶‡¶ø‡¶®',
                otAdded: '‡¶ì‡¶≠‡¶æ‡¶∞‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                confirmDelete: '‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                confirmLogout: '‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                day: '‡¶¶‡¶ø‡¶®',
                night: '‡¶∞‡¶æ‡¶§',
                friday: '‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞',
                absent: '‡¶Ö‡¶®‡ßÅ‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§',
                open: '‡¶ñ‡ßã‡¶≤‡¶æ',
                closed: '‡¶¨‡¶®‡ßç‡¶ß',
                hours: '‡¶ò‡¶£‡ßç‡¶ü‡¶æ',
                oldPinWrong: '‡¶™‡ßÅ‡¶∞‡¶æ‡¶§‡¶® ‡¶™‡¶ø‡¶® ‡¶≠‡ßÅ‡¶≤',
                pinsNotMatch: '‡¶™‡¶ø‡¶® ‡¶Æ‡¶ø‡¶≤‡¶õ‡ßá ‡¶®‡¶æ',
                pinChanged: '‡¶™‡¶ø‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá',
                editSuccess: '‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá',
                editLocked: '‡•ß‡•´ ‡¶¶‡¶ø‡¶® ‡¶™‡¶∞‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®',
                tiffin: '‡¶ü‡¶ø‡¶´‡¶ø‡¶® ‡¶¨‡¶ø‡¶≤',
                night: '‡¶®‡¶æ‡¶á‡¶ü ‡¶¨‡¶ø‡¶≤',
                billAdded: '‡¶¨‡¶ø‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                selectBillType: '‡¶¨‡¶ø‡¶≤ ‡¶ß‡¶∞‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                enterBillAmount: '‡¶¨‡¶ø‡¶≤ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¶‡¶ø‡¶®',
                selectPaymentMethod: '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                fillPaymentDetails: '‡¶∏‡¶ï‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®',
                paymentSubmitted: '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡•®‡•™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶Ø‡¶º ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶π‡¶¨‡ßá‡•§'
            }
        };
        
        // Theme configurations
        const themes = {
            default: { from: '#667eea', to: '#764ba2' },
            ocean: { from: '#2E3192', to: '#1BFFFF' },
            sunset: { from: '#FF512F', to: '#F09819' },
            forest: { from: '#134E5E', to: '#71B280' },
            rose: { from: '#F857A6', to: '#FF5858' },
            night: { from: '#000428', to: '#004e92' },
            candy: { from: '#D3CCE3', to: '#E9E4F0' },
            mint: { from: '#00d2ff', to: '#3a7bd5' },
            fire: { from: '#f12711', to: '#f5af19' },
            purple: { from: '#8E2DE2', to: '#4A00E0' }
        };
        
        // Check if user is logged in
        window.onload = function() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
                checkWelcomeNotification();
                checkSubscriptionStatus();
            }
            
            // Check dark mode
            const savedDarkMode = localStorage.getItem('darkMode');
            if (savedDarkMode === 'true') {
                document.body.classList.add('dark');
                isDarkMode = true;
                updateDarkModeToggle();
            }
            
            // Check language
            const savedLang = localStorage.getItem('language');
            if (savedLang) {
                currentLanguage = savedLang;
                updateLanguage();
            }
            
            // Check theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                currentTheme = savedTheme;
                changeTheme(savedTheme);
            }
            
            // Set today's date as default
            if (document.getElementById('otDate')) {
                document.getElementById('otDate').valueAsDate = new Date();
                document.getElementById('billDate').valueAsDate = new Date();
            }
            
            // Set current month for list page
            const today = new Date();
            const monthString = today.toISOString().substring(0, 7);
            if (document.getElementById('listMonth')) {
                document.getElementById('listMonth').value = monthString;
            }
        };
        
        // Check Subscription Status from Firebase
        function checkSubscriptionStatus() {
            if (navigator.onLine && currentUser && currentUser.phone) {
                database.ref('subscriptions/' + currentUser.phone).once('value')
                    .then((snapshot) => {
                        const firebaseSub = snapshot.val();
                        if (firebaseSub && (firebaseSub.status === 'Yes' || firebaseSub.status === 'approved')) {
                            // Subscription is approved
                            currentUser.subscriptionStatus = firebaseSub.plan;
                            localStorage.setItem('currentUser', JSON.stringify(currentUser));
                            localStorage.setItem('subscription_' + currentUser.phone, JSON.stringify(firebaseSub));
                            updateSubscriptionDisplay();
                        }
                    })
                    .catch(error => console.error('Firebase subscription check error:', error));
            }
        }
        
        // Update Subscription Display
        function updateSubscriptionDisplay() {
            const subscription = localStorage.getItem('subscription_' + currentUser.phone);
            const statusEl = document.getElementById('subscriptionStatus');
            
            if (subscription) {
                const sub = JSON.parse(subscription);
                if (sub.status === 'approved' || sub.status === 'Yes') {
                    const planNames = { basic: 'Basic', premium: 'Premium', pro: 'Pro', ultra: 'Ultra' };
                    statusEl.innerHTML = `<span id="statusText">${planNames[sub.plan]} Plan Active</span>`;
                    statusEl.style.display = 'block';
                } else if (sub.status === 'pending') {
                    statusEl.innerHTML = `<span id="statusText">Subscription Pending</span>`;
                    statusEl.style.display = 'block';
                }
            }
        }
        
        // Check Welcome Notification
        function checkWelcomeNotification() {
            const lastWelcome = localStorage.getItem('lastWelcomeNotification');
            const now = new Date().getTime();
            
            if (!lastWelcome || (now - parseInt(lastWelcome)) > 24 * 60 * 60 * 1000) {
                document.getElementById('welcomeModal').classList.add('active');
                localStorage.setItem('lastWelcomeNotification', now.toString());
            }
        }

        function closeWelcomeModal() {
            document.getElementById('welcomeModal').classList.remove('active');
        }

        function downloadProApp() {
            window.open('https://github.com/garments-ot/pro-app', '_blank');
        }
        
        // Update Language
        function updateLanguage() {
            document.querySelectorAll('[data-en]').forEach(element => {
                if (currentLanguage === 'bn' && element.hasAttribute('data-bn')) {
                    element.textContent = element.getAttribute('data-bn');
                } else if (currentLanguage === 'en' && element.hasAttribute('data-en')) {
                    element.textContent = element.getAttribute('data-en');
                }
            });
            
            document.querySelectorAll('[data-en-placeholder]').forEach(element => {
                if (currentLanguage === 'bn' && element.hasAttribute('data-bn-placeholder')) {
                    element.placeholder = element.getAttribute('data-bn-placeholder');
                } else if (currentLanguage === 'en' && element.hasAttribute('data-en-placeholder')) {
                    element.placeholder = element.getAttribute('data-en-placeholder');
                }
            });
            
            document.getElementById('currentLang').textContent = currentLanguage === 'en' ? 'English' : '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ';
        }
        
        // Change Theme
        function changeTheme(themeName) {
            currentTheme = themeName;
            const theme = themes[themeName];
            document.documentElement.style.setProperty('--bg-from', theme.from);
            document.documentElement.style.setProperty('--bg-to', theme.to);
            
            document.querySelectorAll('.theme-option').forEach(opt => {
                opt.classList.remove('active');
            });
            document.querySelector(`[data-theme="${themeName}"]`).classList.add('active');
            
            localStorage.setItem('theme', themeName);
        }
        
        // Toggle Auth Page Language
        function toggleAuthLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'bn' : 'en';
            localStorage.setItem('language', currentLanguage);
            updateLanguage();
            document.getElementById('authLangText').textContent = currentLanguage === 'en' ? 'EN' : '‡¶¨‡¶æ‡¶Ç';
        }
        
        // Signup Steps
        let currentStep = 1;
        
        function nextStep(step) {
            if (step === 2) {
                const phone = document.getElementById('signupPhone').value;
                if (!phone || phone.length !== 11) {
                    alert(translations[currentLanguage].enterValidPhone);
                    return;
                }
            } else if (step === 3) {
                const name = document.getElementById('signupName').value;
                if (!name) {
                    alert(translations[currentLanguage].enterName);
                    return;
                }
            } else if (step === 4) {
                const position = document.getElementById('signupPosition').value;
                if (!position) {
                    alert(translations[currentLanguage].selectPosition);
                    return;
                }
            } else if (step === 5) {
                const grade = document.getElementById('signupGrade').value;
                if (!grade) {
                    alert(translations[currentLanguage].selectGrade);
                    return;
                }
            } else if (step === 6) {
                const salary = document.getElementById('signupSalary').value;
                if (!salary || salary < 0) {
                    alert(translations[currentLanguage].enterValidSalary);
                    return;
                }
            }
            
            document.getElementById('step' + currentStep).classList.remove('active');
            currentStep = step;
            document.getElementById('step' + currentStep).classList.add('active');
        }
        
        // Show Signup
        function showSignup() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
            currentStep = 1;
            document.querySelectorAll('.step-form').forEach(s => s.classList.remove('active'));
            document.getElementById('step1').classList.add('active');
        }
        
        // Show Login
        function showLogin() {
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }
        
        // Signup Function
        async function signup() {
            const phone = document.getElementById('signupPhone').value;
            const name = document.getElementById('signupName').value;
            const position = document.getElementById('signupPosition').value;
            const grade = document.getElementById('signupGrade').value;
            const salary = document.getElementById('signupSalary').value;
            const pin = document.getElementById('signupPin').value;
            
            if (!pin || pin.length !== 4) {
                alert(translations[currentLanguage].enter4DigitPin);
                return;
            }
            
            const userData = {
                phone: phone,
                name: name,
                position: position,
                grade: grade,
                salary: parseFloat(salary),
                pin: pin,
                createdAt: new Date().toISOString(),
                subscriptionStatus: 'free'
            };
            
            // Save to localStorage
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            users[phone] = userData;
            localStorage.setItem('users', JSON.stringify(users));
            
            // Try to save to Firebase
            if (navigator.onLine) {
                try {
                    const email = phone + '@garments-ot.com';
                    const password = phone + pin;
                    
                    const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                    
                    await userCredential.user.updateProfile({
                        displayName: name
                    });
                    
                    await database.ref('users/' + phone).set({
                        ...userData,
                        uid: userCredential.user.uid
                    });
                } catch (error) {
                    console.error('Firebase error:', error);
                    if (error.code === 'auth/email-already-in-use') {
                        await database.ref('users/' + phone).set(userData).catch(() => {});
                    }
                }
            }
            
            alert(translations[currentLanguage].signupSuccess);
            showLogin();
            
            document.getElementById('signupPhone').value = '';
            document.getElementById('signupName').value = '';
            document.getElementById('signupPosition').value = '';
            document.getElementById('signupGrade').value = '';
            document.getElementById('signupSalary').value = '';
            document.getElementById('signupPin').value = '';
            currentStep = 1;
        }
        
        // Login Function
        function login() {
            const phone = document.getElementById('loginPhone').value;
            const pin = document.getElementById('loginPin').value;
            
            if (!phone || !pin) {
                alert(translations[currentLanguage].enterPhonePin);
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            const localUser = users[phone];
            
            if (localUser && localUser.pin === pin) {
                currentUser = localUser;
                localStorage.setItem('currentUser', JSON.stringify(localUser));
                showMainApp();
                checkWelcomeNotification();
                checkSubscriptionStatus();
                
                if (navigator.onLine) {
                    database.ref('users/' + phone).once('value')
                        .then((snapshot) => {
                            const firebaseUser = snapshot.val();
                            if (firebaseUser) {
                                users[phone] = firebaseUser;
                                localStorage.setItem('users', JSON.stringify(users));
                                currentUser = firebaseUser;
                                localStorage.setItem('currentUser', JSON.stringify(firebaseUser));
                                loadUserData();
                            }
                        })
                        .catch(error => console.error('Firebase sync error:', error));
                }
            } else if (navigator.onLine) {
                database.ref('users/' + phone).once('value')
                    .then((snapshot) => {
                        const user = snapshot.val();
                        if (user && user.pin === pin) {
                            currentUser = user;
                            localStorage.setItem('currentUser', JSON.stringify(user));
                            users[phone] = user;
                            localStorage.setItem('users', JSON.stringify(users));
                            showMainApp();
                            checkWelcomeNotification();
                            checkSubscriptionStatus();
                        } else {
                            alert(translations[currentLanguage].wrongPhonePin);
                        }
                    })
                    .catch((error) => {
                        console.error('Firebase error:', error);
                        alert(translations[currentLanguage].wrongPhonePin);
                    });
            } else {
                alert(translations[currentLanguage].wrongPhonePin);
            }
        }
        
        // Show Main App
        function showMainApp() {
            document.getElementById('authPage').classList.remove('active');
            document.getElementById('mainApp').classList.add('active');
            document.getElementById('loginPhone').value = '';
            document.getElementById('loginPin').value = '';
            loadUserData();
            loadHolidays();
            loadOTList();
            loadBillList();
        }
        
        // Load User Data
        function loadUserData() {
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('profileName').textContent = currentUser.name;
            document.getElementById('profilePhone').textContent = currentUser.phone;
            document.getElementById('profilePosition').textContent = currentUser.position;
            document.getElementById('profileGrade').textContent = currentUser.grade;
            document.getElementById('profileInitial').textContent = currentUser.name.charAt(0).toUpperCase();
            
            const otData = JSON.parse(localStorage.getItem('overtime_' + currentUser.phone) || '[]');
            let totalOT = 0;
            
            otData.forEach((ot) => {
                if (ot.hours) {
                    totalOT += parseFloat(ot.hours);
                }
            });
            
            document.getElementById('totalOT').textContent = totalOT.toFixed(1);
            document.getElementById('calcTotalOT').textContent = totalOT.toFixed(1) + ' ' + (currentLanguage === 'en' ? 'hours' : '‡¶ò‡¶£‡ßç‡¶ü‡¶æ');
            
            const basicSalary = currentUser.salary * 0.536;
            const otRate = ((basicSalary / 26 / 8) * 2);
            const otAmount = totalOT * otRate;
            const attendanceBonus = 725;
            
            // Calculate bills
            const billData = JSON.parse(localStorage.getItem('bills_' + currentUser.phone) || '[]');
            let totalBills = 0;
            billData.forEach((bill) => {
                if (bill.amount) {
                    totalBills += parseFloat(bill.amount);
                }
            });
            
            const estimatedSalary = currentUser.salary + otAmount + attendanceBonus + totalBills;
            
            document.getElementById('estimatedSalary').textContent = '‡ß≥' + Math.round(estimatedSalary);
            document.getElementById('calcTotalSalary').textContent = '‡ß≥' + Math.round(estimatedSalary);
            document.getElementById('otherBenefits').textContent = '‡ß≥' + Math.round(totalBills);
        }
        
        // Load Holidays
        function loadHolidays() {
            const holidays = {
                '2025-01': [{ date: '1 January', dateBn: '‡•ß ‡¶ú‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø', name: 'New Year\'s Day', nameBn: '‡¶®‡¶¨‡¶¨‡¶∞‡ßç‡¶∑' }],
                '2025-02': [{ date: '21 February', dateBn: '‡•®‡•ß ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø', name: 'International Mother Language Day', nameBn: '‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï ‡¶Æ‡¶æ‡¶§‡ßÉ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶¶‡¶ø‡¶¨‡¶∏' }],
                '2025-03': [
                    { date: '17 March', dateBn: '‡•ß‡•≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö', name: 'Birthday of Bangabandhu', nameBn: '‡¶ú‡¶æ‡¶§‡¶ø‡¶∞ ‡¶™‡¶ø‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®' },
                    { date: '26 March', dateBn: '‡•®‡•¨ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö', name: 'Independence Day', nameBn: '‡¶∏‡ßç‡¶¨‡¶æ‡¶ß‡ßÄ‡¶®‡¶§‡¶æ ‡¶¶‡¶ø‡¶¨‡¶∏' }
                ],
                '2025-04': [{ date: '14 April', dateBn: '‡•ß‡•™ ‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤', name: 'Pohela Boishakh', nameBn: '‡¶™‡¶π‡ßá‡¶≤‡¶æ ‡¶¨‡ßà‡¶∂‡¶æ‡¶ñ' }],
                '2025-05': [{ date: '1 May', dateBn: '‡•ß ‡¶Æ‡ßá', name: 'May Day', nameBn: '‡¶Æ‡ßá ‡¶¶‡¶ø‡¶¨‡¶∏' }],
                '2025-08': [{ date: '15 August', dateBn: '‡•ß‡•´ ‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü', name: 'National Mourning Day', nameBn: '‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶∂‡ßã‡¶ï ‡¶¶‡¶ø‡¶¨‡¶∏' }],
                '2025-12': [
                    { date: '16 December', dateBn: '‡•ß‡•¨ ‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞', name: 'Victory Day', nameBn: '‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º ‡¶¶‡¶ø‡¶¨‡¶∏' },
                    { date: '25 December', dateBn: '‡•®‡•´ ‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞', name: 'Christmas Day', nameBn: '‡¶¨‡¶°‡¶º‡¶¶‡¶ø‡¶®' }
                ]
            };
            
            const currentMonth = new Date().toISOString().substring(0, 7);
            const currentHolidays = holidays[currentMonth] || [];
            
            const holidaysList = document.getElementById('holidaysList');
            if (currentHolidays.length === 0) {
                holidaysList.innerHTML = `<p class="text-white text-opacity-70">${translations[currentLanguage].noHolidays}</p>`;
            } else {
                holidaysList.innerHTML = currentHolidays.map(h => `
                    <div class="bg-white bg-opacity-10 rounded-xl p-3 flex items-center">
                        <span class="text-2xl mr-3">üìÖ</span>
                        <div>
                            <p class="text-white font-medium">${currentLanguage === 'bn' ? h.nameBn : h.name}</p>
                            <p class="text-white text-opacity-70 text-sm">${currentLanguage === 'bn' ? h.dateBn : h.date}</p>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        // Handle OT Type Change
        function handleOTTypeChange() {
            const otType = document.getElementById('otType').value;
            const fridayOptions = document.getElementById('fridayOptions');
            const otHoursDiv = document.getElementById('otHoursDiv');
            
            if (otType === 'friday') {
                fridayOptions.style.display = 'block';
                otHoursDiv.style.display = 'none';
            } else if (otType === 'absent') {
                fridayOptions.style.display = 'none';
                otHoursDiv.style.display = 'none';
            } else {
                fridayOptions.style.display = 'none';
                otHoursDiv.style.display = 'block';
            }
        }
        
        // Handle Friday Change
        function handleFridayChange() {
            const fridayType = document.getElementById('fridayType').value;
            const otHoursDiv = document.getElementById('otHoursDiv');
            
            if (fridayType === 'open') {
                otHoursDiv.style.display = 'block';
            } else {
                otHoursDiv.style.display = 'none';
            }
        }
        
        // Add OT
        function addOT() {
            const date = document.getElementById('otDate').value;
            const type = document.getElementById('otType').value;
            let hours = 0;
            
            if (!date || !type) {
                alert(translations[currentLanguage].fillAllFields);
                return;
            }
            
            if (type === 'friday') {
                const fridayType = document.getElementById('fridayType').value;
                if (!fridayType) {
                    alert('Please select Friday status');
                    return;
                }
                if (fridayType === 'open') {
                    hours = parseFloat(document.getElementById('otHours').value) || 0;
                    if (hours === 0) {
                        alert(translations[currentLanguage].enterOTHours);
                        return;
                    }
                }
            } else if (type !== 'absent') {
                hours = parseFloat(document.getElementById('otHours').value) || 0;
                if (hours === 0) {
                    alert(translations[currentLanguage].enterOTHours);
                    return;
                }
            }
            
            const otEntry = {
                id: Date.now().toString(),
                date: date,
                type: type,
                hours: hours,
                fridayType: type === 'friday' ? document.getElementById('fridayType').value : null,
                timestamp: new Date().toISOString()
            };
            
            const otData = JSON.parse(localStorage.getItem('overtime_' + currentUser.phone) || '[]');
            otData.push(otEntry);
            localStorage.setItem('overtime_' + currentUser.phone, JSON.stringify(otData));
            
            database.ref('overtime/' + currentUser.phone + '/' + otEntry.id).set(otEntry)
                .catch(error => console.error('Firebase error:', error));
            
            alert(translations[currentLanguage].otAdded);
            
            document.getElementById('otType').value = '';
            document.getElementById('otHours').value = '';
            document.getElementById('fridayType').value = '';
            document.getElementById('fridayOptions').style.display = 'none';
            document.getElementById('otHoursDiv').style.display = 'block';
            
            loadUserData();
            loadOTList();
        }

        // Add Bill
        function addBill() {
            const date = document.getElementById('billDate').value;
            const type = document.getElementById('billType').value;
            const amount = parseFloat(document.getElementById('billAmount').value) || 0;
            
            if (!date || !type) {
                alert(translations[currentLanguage].selectBillType);
                return;
            }
            
            if (amount === 0) {
                alert(translations[currentLanguage].enterBillAmount);
                return;
            }
            
            const billEntry = {
                id: Date.now().toString(),
                date: date,
                type: type,
                amount: amount,
                timestamp: new Date().toISOString()
            };
            
            const billData = JSON.parse(localStorage.getItem('bills_' + currentUser.phone) || '[]');
            billData.push(billEntry);
            localStorage.setItem('bills_' + currentUser.phone, JSON.stringify(billData));
            
            database.ref('bills/' + currentUser.phone + '/' + billEntry.id).set(billEntry)
                .catch(error => console.error('Firebase error:', error));
            
            alert(translations[currentLanguage].billAdded);
            
            document.getElementById('billDate').valueAsDate = new Date();
            document.getElementById('billType').value = '';
            document.getElementById('billAmount').value = '';
            
            loadUserData();
            loadBillList();
        }
        
        // Calculate Salary
        function calculateSalary() {
            document.getElementById('attendanceBonusModal').classList.add('active');
        }

        function calculateWithBonus(hasBonus) {
            document.getElementById('attendanceBonusModal').classList.remove('active');
            
            const totalSalary = currentUser.salary;
            const basic = totalSalary * 0.536;
            const houseRent = totalSalary * 0.30;
            const medical = totalSalary * 0.05;
            
            const otRate = ((basic / 26 / 8) * 2);
            
            const otData = JSON.parse(localStorage.getItem('overtime_' + currentUser.phone) || '[]');
            let totalOTHours = 0;
            
            otData.forEach((ot) => {
                if (ot.hours) {
                    totalOTHours += parseFloat(ot.hours);
                }
            });
            
            const otAmount = totalOTHours * otRate;
            const attendanceBonus = hasBonus ? 725 : 0;
            
            // Calculate bills
            const billData = JSON.parse(localStorage.getItem('bills_' + currentUser.phone) || '[]');
            let totalBills = 0;
            billData.forEach((bill) => {
                if (bill.amount) {
                    totalBills += parseFloat(bill.amount);
                }
            });
            
            const finalSalary = totalSalary + otAmount + attendanceBonus + totalBills;
            
            document.getElementById('calcTotalSalary').textContent = '‡ß≥' + Math.round(finalSalary);
            document.getElementById('basicSalary').textContent = '‡ß≥' + Math.round(basic);
            document.getElementById('houseRent').textContent = '‡ß≥' + Math.round(houseRent);
            document.getElementById('medical').textContent = '‡ß≥' + Math.round(medical);
            document.getElementById('otRate').textContent = '‡ß≥' + otRate.toFixed(2);
            document.getElementById('otAmount').textContent = '‡ß≥' + Math.round(otAmount);
            document.getElementById('attendanceBonusCalc').textContent = '‡ß≥' + attendanceBonus;
            document.getElementById('tiffinBillCalc').textContent = '‡ß≥' + Math.round(billData.filter(b => b.type === 'tiffin').reduce((sum, b) => sum + b.amount, 0));
            document.getElementById('nightBillCalc').textContent = '‡ß≥' + Math.round(billData.filter(b => b.type === 'night').reduce((sum, b) => sum + b.amount, 0));
            
            document.getElementById('salaryBreakdown').style.display = 'block';
        }
        
        // Load OT List
        function loadOTList() {
            const selectedMonth = document.getElementById('listMonth').value;
            const otListTable = document.getElementById('otListTable');
            otListTable.innerHTML = '';
            
            const otData = JSON.parse(localStorage.getItem('overtime_' + currentUser.phone) || '[]');
            
            const filteredData = otData.filter(ot => ot.date.startsWith(selectedMonth));
            
            if (filteredData.length === 0) {
                otListTable.innerHTML = `<tr><td colspan="4" class="py-4 text-center text-white text-opacity-70">${currentLanguage === 'bn' ? '‡¶ï‡ßã‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡ßá‡¶á' : 'No data found'}</td></tr>`;
                document.getElementById('summaryTotalOT').textContent = '0';
                document.getElementById('summaryDay').textContent = '0';
                document.getElementById('summaryNight').textContent = '0';
                document.getElementById('summaryFriday').textContent = '0';
                return;
            }
            
            filteredData.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            let totalOT = 0;
            let dayCount = 0;
            let nightCount = 0;
            let fridayCount = 0;
            
            filteredData.forEach((ot) => {
                if (ot.hours) totalOT += parseFloat(ot.hours);
                if (ot.type === 'day') dayCount++;
                if (ot.type === 'night') nightCount++;
                if (ot.type === 'friday') fridayCount++;
                
                const typeText = {
                    'day': translations[currentLanguage].day,
                    'night': translations[currentLanguage].night,
                    'friday': translations[currentLanguage].friday + (ot.fridayType === 'open' ? ` (${translations[currentLanguage].open})` : ` (${translations[currentLanguage].closed})`),
                    'absent': translations[currentLanguage].absent
                };
                
                const row = document.createElement('tr');
                row.classList.add('border-b', 'border-white', 'border-opacity-10');
                row.innerHTML = `
                    <td class="py-3">${new Date(ot.date).toLocaleDateString(currentLanguage === 'bn' ? 'bn-BD' : 'en-US')}</td>
                    <td class="py-3">${typeText[ot.type]}</td>
                    <td class="py-3">${ot.hours || '-'}</td>
                    <td class="py-3">
                        <button onclick="deleteOT('${ot.id}')" class="text-red-400 hover:text-red-300">üóëÔ∏è</button>
                    </td>
                `;
                otListTable.appendChild(row);
            });
            
            document.getElementById('summaryTotalOT').textContent = totalOT.toFixed(1);
            document.getElementById('summaryDay').textContent = dayCount;
            document.getElementById('summaryNight').textContent = nightCount;
            document.getElementById('summaryFriday').textContent = fridayCount;
        }

        // Load Bill List
        function loadBillList() {
            const selectedMonth = document.getElementById('listMonth').value;
            const billListTable = document.getElementById('billListTable');
            billListTable.innerHTML = '';
            
            const billData = JSON.parse(localStorage.getItem('bills_' + currentUser.phone) || '[]');
            
            const filteredData = billData.filter(bill => bill.date.startsWith(selectedMonth));
            
            if (filteredData.length === 0) {
                billListTable.innerHTML = `<tr><td colspan="4" class="py-4 text-center text-white text-opacity-70">${currentLanguage === 'bn' ? '‡¶ï‡ßã‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡ßá‡¶á' : 'No data found'}</td></tr>`;
                return;
            }
            
            filteredData.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            filteredData.forEach((bill) => {
                const typeText = bill.type === 'tiffin' ? translations[currentLanguage].tiffin : translations[currentLanguage].night;
                
                const row = document.createElement('tr');
                row.classList.add('border-b', 'border-white', 'border-opacity-10');
                row.innerHTML = `
                    <td class="py-3">${new Date(bill.date).toLocaleDateString(currentLanguage === 'bn' ? 'bn-BD' : 'en-US')}</td>
                    <td class="py-3">${typeText}</td>
                    <td class="py-3">‡ß≥${bill.amount}</td>
                    <td class="py-3">
                        <button onclick="deleteBill('${bill.id}')" class="text-red-400 hover:text-red-300">üóëÔ∏è</button>
                    </td>
                `;
                billListTable.appendChild(row);
            });
        }
        
        // Delete OT
        function deleteOT(id) {
            if (confirm(translations[currentLanguage].confirmDelete)) {
                let otData = JSON.parse(localStorage.getItem('overtime_' + currentUser.phone) || '[]');
                otData = otData.filter(ot => ot.id !== id);
                localStorage.setItem('overtime_' + currentUser.phone, JSON.stringify(otData));
                
                database.ref('overtime/' + currentUser.phone + '/' + id).remove()
                    .catch(error => console.error('Firebase error:', error));
                
                loadOTList();
                loadUserData();
            }
        }

        // Delete Bill
        function deleteBill(id) {
            if (confirm(translations[currentLanguage].confirmDelete)) {
                let billData = JSON.parse(localStorage.getItem('bills_' + currentUser.phone) || '[]');
                billData = billData.filter(bill => bill.id !== id);
                localStorage.setItem('bills_' + currentUser.phone, JSON.stringify(billData));
                
                database.ref('bills/' + currentUser.phone + '/' + id).remove()
                    .catch(error => console.error('Firebase error:', error));
                
                loadBillList();
                loadUserData();
            }
        }
        
        // Show Edit Profile
        function showEditProfile() {
            document.getElementById('editName').value = currentUser.name;
            document.getElementById('editPosition').value = currentUser.position;
            document.getElementById('editGrade').value = currentUser.grade;
            document.getElementById('editSalary').value = currentUser.salary;

            const lastEditDate = new Date(currentUser.lastEditDate || currentUser.createdAt);
            const today = new Date();
            const daysSinceEdit = Math.floor((today - lastEditDate) / (1000 * 60 * 60 * 24));

            if (daysSinceEdit < 15) {
                document.getElementById('editForm').style.display = 'none';
                document.getElementById('editLocked').style.display = 'block';
                const unlockDate = new Date(lastEditDate);
                unlockDate.setDate(unlockDate.getDate() + 15);
                document.getElementById('editUnlockDate').textContent = `Can edit on: ${unlockDate.toLocaleDateString()}`;
            } else {
                document.getElementById('editForm').style.display = 'block';
                document.getElementById('editLocked').style.display = 'none';
            }

            showPage('editProfile');
        }

        function saveProfile() {
            const lastEditDate = new Date(currentUser.lastEditDate || currentUser.createdAt);
            const today = new Date();
            const daysSinceEdit = Math.floor((today - lastEditDate) / (1000 * 60 * 60 * 24));

            if (daysSinceEdit < 15) {
                alert(translations[currentLanguage].editLocked);
                return;
            }

            currentUser.name = document.getElementById('editName').value;
            currentUser.position = document.getElementById('editPosition').value;
            currentUser.grade = document.getElementById('editGrade').value;
            currentUser.salary = parseFloat(document.getElementById('editSalary').value);
            currentUser.lastEditDate = new Date().toISOString();

            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            database.ref('users/' + currentUser.phone).update(currentUser)
                .catch(error => console.error('Firebase error:', error));

            alert(translations[currentLanguage].editSuccess);
            loadUserData();
            showPage('profile');
        }

        function changePIN() {
            const oldPin = document.getElementById('currentPin').value;
            const newPin = document.getElementById('newPin').value;
            const confirmPin = document.getElementById('confirmPin').value;

            if (oldPin !== currentUser.pin) {
                alert(translations[currentLanguage].oldPinWrong);
                return;
            }

            if (newPin !== confirmPin) {
                alert(translations[currentLanguage].pinsNotMatch);
                return;
            }

            if (newPin.length !== 4 || isNaN(newPin)) {
                alert(translations[currentLanguage].enter4DigitPin);
                return;
            }

            currentUser.pin = newPin;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            users[currentUser.phone].pin = newPin;
            localStorage.setItem('users', JSON.stringify(users));

            database.ref('users/' + currentUser.phone).update({ pin: newPin })
                .catch(error => console.error('Firebase error:', error));

            alert(translations[currentLanguage].pinChanged);
            
            document.getElementById('currentPin').value = '';
            document.getElementById('newPin').value = '';
            document.getElementById('confirmPin').value = '';
        }

        // Subscription Functions
        function showSubscription() {
            showPage('subscription');
            selectedPlan = null;
            document.querySelectorAll('.plan-card').forEach(card => card.classList.remove('active'));
            document.getElementById('proceedBtn').style.display = 'none';
        }

        function selectPlan(plan) {
            selectedPlan = plan;
            document.querySelectorAll('.plan-card').forEach(card => card.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.getElementById('proceedBtn').style.display = 'block';
        }

        function proceedPayment() {
            if (!selectedPlan) {
                alert('Please select a plan');
                return;
            }
            showPage('payment');
            const planNames = { basic: 'Basic', premium: 'Premium', pro: 'Pro', ultra: 'Ultra' };
            document.getElementById('paymentTitle').textContent = planNames[selectedPlan] + ' Plan - Payment';
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('[id$="Btn"]').forEach(btn => btn.classList.remove('bg-blue-500'));
            document.getElementById(method + 'Btn').classList.add('bg-blue-500');
            document.getElementById('paymentForm').style.display = 'block';
        }

        function showImageUploadInfo() {
            document.getElementById('imageUploadModal').classList.add('active');
        }

        function submitPayment() {
            if (!selectedPaymentMethod) {
                alert(translations[currentLanguage].selectPaymentMethod);
                return;
            }

            const accountNumber = document.getElementById('accountNumber').value;
            const transactionId = document.getElementById('transactionId').value;
            const lastFourDigits = document.getElementById('lastFourDigits').value;
            const screenshotUrl = document.getElementById('screenshotUrl').value;

            if (!accountNumber || !transactionId || !lastFourDigits || !screenshotUrl) {
                alert(translations[currentLanguage].fillPaymentDetails);
                return;
            }

            const paymentData = {
                plan: selectedPlan,
                method: selectedPaymentMethod,
                accountNumber: accountNumber,
                transactionId: transactionId,
                lastFourDigits: lastFourDigits,
                screenshotUrl: screenshotUrl,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            localStorage.setItem('subscription_' + currentUser.phone, JSON.stringify(paymentData));
            database.ref('subscriptions/' + currentUser.phone).set(paymentData)
                .catch(error => console.error('Firebase error:', error));

            alert(translations[currentLanguage].paymentSubmitted);
            
            document.getElementById('accountNumber').value = '';
            document.getElementById('transactionId').value = '';
            document.getElementById('lastFourDigits').value = '';
            document.getElementById('screenshotUrl').value = '';

            updateSubscriptionDisplay();
            document.getElementById('subscriptionPendingModal').classList.add('active');
        }

        function openUpdateLink() {
            window.open('https://github.com/garments-ot/app', '_blank');
        }
        
        // Show Page
        function showPage(page) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
            
            if (event && event.currentTarget && event.currentTarget.classList.contains('nav-item')) {
                event.currentTarget.classList.add('active');
            }
            
            document.getElementById(page + 'Page').classList.add('active');
            
            if (page === 'list') {
                loadOTList();
                loadBillList();
            } else if (page === 'home') {
                loadUserData();
                loadHolidays();
            }
        }
        
        // Toggle Dark Mode
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark');
            localStorage.setItem('darkMode', isDarkMode);
            updateDarkModeToggle();
        }
        
        function updateDarkModeToggle() {
            const toggle = document.getElementById('darkModeToggle');
            const circle = toggle.querySelector('div');
            if (isDarkMode) {
                circle.style.left = 'calc(100% - 1.375rem)';
            } else {
                circle.style.left = '0.125rem';
            }
        }
        
        // Toggle Language
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'bn' : 'en';
            localStorage.setItem('language', currentLanguage);
            updateLanguage();
            loadUserData();
            loadHolidays();
            loadOTList();
            loadBillList();
        }
        
        // Show Help
        function showHelp() {
            alert('Help: Track your overtime and calculate salary easily!');
        }
        
        // Show Privacy
        function showPrivacy() {
            alert('Privacy Policy: We protect your personal information.');
        }
        
        // Show About
        function showAbout() {
            alert('About: Garments OT Calculator v1.0.0\nCreated for garments workers in Bangladesh');
        }
        
        // Close Modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // Logout
        function logout() {
            if (confirm(translations[currentLanguage].confirmLogout)) {
                localStorage.removeItem('currentUser');
                currentUser = null;
                document.getElementById('mainApp').classList.remove('active');
                document.getElementById('authPage').classList.add('active');
                showLogin();
            }
        }
        
        // Close modal on outside click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
